!function(){"use strict";window.GOVUK=window.GOVUK||{};var e={essential:!0,settings:!1,usage:!1,campaigns:!1},t={cookies_policy:"essential",seen_cookie_message:"essential",cookie_preferences_set:"essential",cookies_preferences_set:"essential","_email-alert-frontend_session":"essential",intervention_campaign:"essential",licensing_session:"essential",govuk_contact_referrer:"essential",multivariatetest_cohort_coronavirus_extremely_vulnerable_rate_limit:"essential",dgu_beta_banner_dismissed:"settings",global_bar_seen:"settings",user_nation:"settings","JS-Detection":"usage",TLSversion:"usage",_ga_VBLT2V3FZR:"usage",_ga_P1DGM6TVYF:"usage",_ga_S5RQ7FTGVR:"usage"};window.GOVUK.cookie=function(e,t,o){return void 0!==t?!1===t||null===t?window.GOVUK.setCookie(e,"",{days:-1}):(void 0===o&&(o={days:30}),window.GOVUK.setCookie(e,t,o)):window.GOVUK.getCookie(e)},window.GOVUK.setDefaultConsentCookie=function(){window.GOVUK.setConsentCookie(e)},window.GOVUK.approveAllCookieTypes=function(){var e={essential:!0,settings:!0,usage:!0,campaigns:!0};window.GOVUK.setCookie("cookies_policy",JSON.stringify(e),{days:365})},window.GOVUK.getConsentCookie=function(){var e,t=window.GOVUK.cookie("cookies_policy");if(!t)return null;try{e=JSON.parse(t)}catch(e){return null}return"object"!=typeof e&&null!==e&&(e=JSON.parse(e)),e},window.GOVUK.setConsentCookie=function(o){var n=window.GOVUK.getConsentCookie();for(var i in n||(n=JSON.parse(JSON.stringify(e))),o)if(n[i]=o[i],!o[i])for(var s in t)t[s]===i&&window.GOVUK.deleteCookie(s);window.GOVUK.setCookie("cookies_policy",JSON.stringify(n),{days:365})},window.GOVUK.checkConsentCookieCategory=function(e,o){var n=window.GOVUK.getConsentCookie();if(!n&&t[e])return!0;n=window.GOVUK.getConsentCookie();try{return n[o]}catch(e){return console.error(e),!1}},window.GOVUK.checkConsentCookie=function(e,o){if("cookies_policy"===e||null===o||!1===o)return!0;if(e.match("^govuk_surveySeen")||e.match("^govuk_taken"))return window.GOVUK.checkConsentCookieCategory(e,"settings");if(t[e]){var n=t[e];return window.GOVUK.checkConsentCookieCategory(e,n)}return!1},window.GOVUK.setCookie=function(e,t,o){if(window.GOVUK.checkConsentCookie(e,t)){void 0===o&&(o={});var n=e+"="+t+"; path=/";if(o.days){var i=new Date;i.setTime(i.getTime()+24*o.days*60*60*1e3),n=n+"; expires="+i.toGMTString()}"https:"===document.location.protocol&&(n+="; Secure"),document.cookie=n}},window.GOVUK.getCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0,i=o.length;n<i;n++){for(var s=o[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return decodeURIComponent(s.substring(t.length))}return null},window.GOVUK.getCookieCategory=function(e){return t[e]},window.GOVUK.deleteCookie=function(e){window.GOVUK.cookie(e,null),window.GOVUK.expireCookie(e)},window.GOVUK.expireCookie=function(e,t=""){var o=new Date(0);document.cookie=e+"="+t+";expires="+o+";",document.cookie=e+"="+t+";expires="+o+";domain="+window.location.hostname+";path=/"},window.GOVUK.deleteUnconsentedCookies=function(){var e=window.GOVUK.getConsentCookie();for(var o in e)if(!e[o])for(var n in t)t[n]===o&&window.GOVUK.deleteCookie(n)}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e){this.$module=e}t.prototype.init=function(){this.$module.submitSettingsForm=this.submitSettingsForm.bind(this),document.querySelector("form[data-module=cookie-settings]").addEventListener("submit",this.$module.submitSettingsForm),window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.init(this.setInitialFormValues.bind(this)):this.setInitialFormValues()},t.prototype.setInitialFormValues=function(){window.GOVUK.cookie("cookies_policy")||window.GOVUK.useSingleConsentApi||window.GOVUK.setDefaultConsentCookie();var e=window.GOVUK.cookie("cookies_policy");if(e){var t=JSON.parse(e);for(var o in delete t.essential,t){var n;(n=t[o]?document.querySelector("input[name=cookies-"+o+"][value=on]"):document.querySelector("input[name=cookies-"+o+"][value=off]"))&&(n.checked=!0)}}},t.prototype.submitSettingsForm=function(e){e.preventDefault();for(var t=e.target.getElementsByTagName("input"),o={},n=0;n<t.length;n++){var i=t[n];if(i.checked){var s=i.name.replace("cookies-",""),r="on"===i.value;o[s]=r,"usage"!==s||r||(window.GOVUK.stopSendingAnalytics=!0,window.GOVUK.LUX={})}}return window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.setPreferences(null,o):(window.GOVUK.setConsentCookie(o),window.GOVUK.setCookie("cookies_preferences_set",!0,{days:365})),this.showConfirmationMessage(),!1},t.prototype.showConfirmationMessage=function(){var e=document.querySelector("div[data-cookie-confirmation]");e.style.display="none";var o=document.querySelector(".cookie-settings__prev-page"),n=t.prototype.getReferrerLink();document.body.scrollTop=document.documentElement.scrollTop=0,o&&(n&&n!==document.location.pathname?(o.href=n,o.style.display="inline"):o.style.display="none"),e.style.display="block"},t.prototype.getReferrerLink=function(){var e=!1;try{e=document.referrer||new URL(document.referrer).pathname}catch(e){console.warn("Error grabbing referrer for cookie settings",window.location,e)}return e},e.CookieSettings=t}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var o in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],o)&&(e[o]=arguments[t][o]);return e}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e,t){for(var o in this.$table=e,this.options={outOf:65,applyOnInit:!0,autoOutdent:!1,outdentAll:!1,chartVisibleText:"Change to table and accessible view",tableVisibleText:"Change to chart view",chartAlertText:"Chart visible",tableAlertText:"Table visible",toggleAfter:!1,returnReference:!1},t)this.options[o]=t[o]}t.prototype.init=function(){(this.detectIEVersion(),this.ENABLED=!(this.ie&&this.ie<8),this.$graphContainer=document.createElement("div"),this.$graphContainer.className="mc-chart-container",this.$graph=document.createElement("div"),this.$graph.setAttribute("aria-hidden","true"),this.$graph.setAttribute("class",this.$table.className),this.$graph.classList.add("mc-chart"),this.chartId=this.getChartId(),this.options.stacked=this.$table.classList.contains("mc-stacked"),this.options.stacked)&&(0===this.$table.querySelectorAll("thead th").length&&(this.ENABLED=!1));this.options.negative=this.$table.classList.contains("mc-negative");var e=this.$table.querySelectorAll("tbody tr")[0].querySelectorAll("th, td").length>2;if(this.options.multiple=!this.options.stacked&&(this.$table.classList.contains("mc-multiple")||e),this.options.autoOutdent=this.options.autoOutdent||this.$table.classList.contains("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.classList.contains("mc-outdented"),this.options.multiple&&this.$graph.classList.add("mc-multiple"),this.options.hasCaption=!!this.$table.querySelectorAll("caption").length,this.ENABLED&&(this.apply(),this.options.applyOnInit||this.toggleLink.click()),this.options.returnReference)return this},t.prototype.detectIEVersion=function(){this.ie=function(){var e,t=3,o=document.createElement("div"),n=o.getElementsByTagName("i");do{o.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->"}while(t<10&&n[0]);return t>4?t:e}()},t.prototype.apply=function(){if(this.ENABLED)try{this.constructChart(),this.addClassesToHeader(),this.applyWidths(),this.insert(),this.$table.classList.add("mc-hidden"),this.applyOutdent()}catch(e){console.error("MagnaCharta error:",e)}},t.prototype.construct={},t.prototype.construct.thead=function(){var e=document.createElement("div");e.classList.add("mc-thead");var t=document.createElement("div");t.classList.add("mc-tr");for(var o="",n=this.$table.querySelectorAll("thead th"),i=0;i<n.length;i++)o+='<div class="mc-th">',o+=n[i].innerHTML,o+="</div>";return t.innerHTML=o,e.appendChild(t),e},t.prototype.construct.tbody=function(){var e=document.createElement("div");e.classList.add("mc-tbody");for(var t=this.$table.querySelectorAll("tbody tr"),o=0;o<t.length;o++){var n=document.createElement("div");n.classList.add("mc-tr");for(var i="",s=t[o].querySelectorAll("th, td"),r=0;r<s.length;r++)i+='<div class="mc-td">',i+=s[r].innerHTML,i+="</div>";n.innerHTML=i,e.appendChild(n)}return e},t.prototype.construct.caption=function(){return this.$table.querySelector("caption").cloneNode(!0)},t.prototype.construct.toggleLink=function(e){var t=document.createElement("button"),o=document.createElement("span"),n=document.createElement("span");return o.classList.add("mc-toggle-text"),o.innerHTML=e,n.classList.add("govuk-visually-hidden","mc-toggle-status"),n.setAttribute("role","alert"),t.classList.add("govuk-body-s","mc-toggle-button"),t.appendChild(o),t.appendChild(n),t},t.prototype.addToggleClick=function(e,t,o,n){var i=this;this.toggleLink.addEventListener("click",(function(s){s.preventDefault();var r=i.toggleLink.querySelector(".mc-toggle-text"),a=i.toggleLink.querySelector(".mc-toggle-status");i.$graphContainer.classList.toggle("mc-hidden"),i.$table.classList.toggle("mc-hidden"),r.innerHTML=r.innerHTML===t?e:t,a.innerHTML=a.innerHTML===n?o:n}))},t.prototype.constructChart=function(){var e=this.construct.thead.call(this),t=this.construct.tbody.call(this);if(this.toggleLink=this.construct.toggleLink(this.options.chartVisibleText),this.addToggleClick(this.options.chartVisibleText,this.options.tableVisibleText,this.options.chartAlertText,this.options.tableAlertText),this.options.hasCaption){var o=this.construct.caption.call(this);this.$graph.appendChild(o)}this.options.toggleAfter?this.$table.insertAdjacentElement("afterend",this.toggleLink):this.$table.insertAdjacentElement("beforebegin",this.toggleLink),this.$graph.appendChild(e),this.$graph.appendChild(t)},t.prototype.utils={isFloat:function(e){return!isNaN(parseFloat(e))},stripValue:function(e){return e.replace(/,|\xa3|%|[a-z]/gi,"")},returnMax:function(e){for(var t=0,o=0;o<e.length;o++)e[o]>t&&(t=e[o]);return t},isNegative:function(e){return e<0}},t.prototype.addClassesToHeader=function(){var e=this.$graph.querySelectorAll(".mc-th"),t=e.length;this.options.stacked&&(e[t-1].classList.add("mc-stacked-header","mc-header-total"),t-=1);for(var o=1;o<t;o++)e[o].classList.add("mc-key-header"),e[o].classList.contains("mc-stacked-header")||e[o].classList.add("mc-key-"+o)},t.prototype.calculateMaxWidth=function(){for(var e=[],t=0,o=this.$graph.querySelectorAll(".mc-tr"),n=0;n<o.length;n++){for(var i=o[n],s=i.querySelectorAll(".mc-td"),r=[],a=1;a<s.length;a++)r.push(s[a]);var l=r.length;if(l){this.options.stacked&&(r[l-1].classList.add("mc-stacked-total"),l-=1);var c=i.querySelector(".mc-td");c&&c.classList.add("mc-key-cell");for(var u=0,d=0;d<l;d++){var h=r[d];h.classList.add("mc-bar-cell"),h.classList.add("mc-bar-"+(d+1));var p=this.utils.stripValue(h.innerText);if(this.utils.isFloat(p)){var m=parseFloat(p,10),g=Math.abs(m);0===m&&h.classList.add("mc-bar-zero"),this.options.negative&&(this.utils.isNegative(m)?(h.classList.add("mc-bar-negative"),g>t&&(t=g)):h.classList.add("mc-bar-positive")),m=g,this.options.stacked?u+=m:(u=m,e.push(m))}}}this.options.stacked&&e.push(u)}var f={};return f.max=parseFloat(this.utils.returnMax(e),10),f.single=parseFloat(this.options.outOf/f.max,10),this.options.negative&&(f.marginLeft=parseFloat(t,10)*f.single,f.maxNegative=parseFloat(t,10)),f},t.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();for(var e=this.$graph.querySelectorAll(".mc-tr"),t=0;t<e.length;t++)for(var o=e[t].querySelectorAll(".mc-bar-cell"),n=0;n<o.length;n++){var i=o[n],s=parseFloat(this.utils.stripValue(i.innerText),10),r=s*this.dimensions.single,a=Math.abs(s),l=Math.abs(r);if(this.options.negative)if(i.classList.contains("mc-bar-positive"))i.style.marginLeft=this.dimensions.marginLeft+"%";else if(a<this.dimensions.maxNegative){var c=(this.dimensions.maxNegative-a)*this.dimensions.single;i.style.marginLeft=c+"%"}i.innerHTML="<span>"+i.innerHTML+"</span>",i.style.width=l+"%"}},t.prototype.insert=function(){var e=document.createElement("span"),t="mc-chart-not-accessible-"+this.chartId;e.innerHTML="This content is not accessible - switch to table",e.className="mc-hidden",e.id=t,this.$graphContainer.setAttribute("aria-labelledby",t),this.$graphContainer.appendChild(this.$graph),this.$graphContainer.appendChild(e),this.$table.insertAdjacentElement("afterend",this.$graphContainer)},t.prototype.applyOutdent=function(){for(var e=this.$graph.querySelectorAll(".mc-bar-cell"),t=0;t<e.length;t++){var o=e[t],n=parseFloat(this.utils.stripValue(o.innerText),10),i=o.querySelector("span"),s=o.querySelector("span").offsetWidth+10,r=o.offsetWidth;this.options.stacked?(s>r&&n>0||n<1)&&o.classList.add("mc-value-overflow"):(0===n&&o.classList.add("mc-bar-outdented"),this.options.autoOutdent&&s>=r||this.options.outdentAll?(o.classList.add("mc-bar-outdented"),i.style.marginLeft="100%",i.style.display="inline-block"):o.classList.add("mc-bar-indented"))}},t.prototype.getChartId=function(){for(var e=document.querySelectorAll("table.js-barchart-table"),t=null,o=0;o<e.length;o++)e[o]===this.$table&&(t=o);return t},e.MagnaCharta=t}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},function(e){"use strict";var t=function(e){this.$element=e};t.prototype.init=function(){for(var t=this.$element.querySelectorAll(".js-barchart-table"),o=[],n=0;n<t.length;n++){var i=t[n].className;-1===i.indexOf("mc-chart")&&-1===i.indexOf("js-barchart-table-init")&&o.push(t[n])}for(var s=0;s<o.length;s++){var r=o[s];new e.Modules.MagnaCharta(r,{toggleText:"Change between chart and table"}).init(),r.className=r.className+" js-barchart-table-init"}},e.GovspeakBarchartEnhancement=t}(window.GOVUK),function(){"use strict";window.GOVUK=window.GOVUK||{};var e=window.GOVUK||{},t=function(e,t){this.$element=e,this.$classOverride=void 0!==t?t:"gem-c-govspeak__youtube-video"};t.prototype.init=function(){if(!this.campaignCookiesAllowed())return this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start),void this.decorateLink();this.startModule()},t.prototype.decorateLink=function(){for(var e=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]'),t=0;t<e.length;++t){var o=e[t],n=o.closest("p"),i=o.getAttribute("href"),s=o.textContent,r=document.createElement("p");r.setAttribute("class","gem-c-govspeak__youtube-placeholder govuk-body");var a=`\n        <span class="govuk-heading-s">How to watch this YouTube video</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">There's a YouTube video on this page. You can't access it because of your cookie settings.</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">You can <a href="/help/cookies" class="govuk-link">change your cookie settings</a> or watch the video on YouTube instead:</span>\n        <a href="${i}" class="govuk-link">${s}</a>\n      `;r.innerHTML=a,n.after(r),n.classList.add("gem-c-govspeak__youtube-placeholder-link")}},t.prototype.startModule=function(){window.removeEventListener("cookie-consent",this.start);for(var e=this.$element.querySelectorAll(".gem-c-govspeak__youtube-placeholder"),o=0;o<e.length;++o)e[o].remove();var n=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]');n.length>0&&t.insertApiScript();for(var i=0;i<n.length;++i){var s=n[i],r=s.getAttribute("href"),a={link:s};if(r.includes("/live_stream")){var l=t.parseLivestream(r);!this.hasDisabledEmbed(s)&&l&&(a.channel=l,this.setupVideo(a))}else{var c=t.parseVideoId(r);!this.hasDisabledEmbed(s)&&c&&(a.videoId=c,this.setupVideo(a))}}},t.prototype.hasDisabledEmbed=function(e){return"off"===e.getAttribute("data-youtube-player")},t.prototype.setupVideo=function(e){var o=t.nextId(),n=e.link,i=e.videoId?e.videoId:e.channel,s=n.parentNode,r=s.parentNode,a=document.createElement("div");a.className+=this.$classOverride,a.innerHTML='<span id="'+o+'" data-video-id="'+i+'"></span>',e.title=n.textContent,r.replaceChild(a,s),this.insertVideo(o,e)},t.prototype.insertVideo=function(e,o){var n="",i="";o.channel?(n=o.channel,i="live_stream"):i=o.videoId;var s=function(){new window.YT.Player(e,{videoId:i,host:"https://www.youtube-nocookie.com",playerVars:{enablejsapi:1,origin:window.location.origin,rel:0,disablekb:1,modestbranding:1,channel:n},events:{onReady:function(e){var t=o.title;e.target.getIframe().title=t+" (video)",window.GOVUK.analyticsGa4.analyticsModules&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.configureVideo(e)},onStateChange:function(e){var t=e.data,o={"-1":"VideoUnstarted",0:"VideoEnded",1:"VideoPlaying",2:"VideoPaused",3:"VideoBuffering",5:"VideoCued"};window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.trackVideo(e,o[t])}}})};s=s.bind(this),t.playerApiReady?s.call():t.queuedInserts.push(s)},t.prototype.campaignCookiesAllowed=function(){var e=window.GOVUK.getConsentCookie();return null!==e&&e.campaigns},t.nextId=function(){return this.embedCount=this.embedCount||0,this.embedCount+=1,"youtube-"+this.embedCount},t.insertApiScript=function(){if(!this.apiScriptInserted){var e=document.createElement("script");e.src="https://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.apiScriptInserted=!0}},t.parseLivestream=function(e){var t=e.match(/channel=([^&]*)/);if(t)return t[1]},t.parseVideoId=function(e){var t;try{t=new URL(e)}catch(e){return}return"www.youtube.com"===t.host||"youtube.com"===t.host?t.searchParams.get("v")||void 0:"youtu.be"===t.host?t.pathname.slice(1):void 0},t.apiScriptInserted=!1,t.playerApiReady=!1,t.queuedInserts=[],window.onYouTubePlayerAPIReady=function(){t.playerApiReady=!0;for(var e=0;e<t.queuedInserts.length;e++)t.queuedInserts[e].call()},e.GovspeakYoutubeLinkEnhancement=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e){this.$module=e}t.prototype.init=function(){this.$module.focus()},e.InitialFocus=t}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e){this.$module=e}t.prototype.init=function(){this.toggleTarget=this.$module.querySelector(".js-class-toggle"),this.$module.addFocusClass=this.addFocusClass.bind(this),this.$module.removeFocusClassFromEmptyInput=this.removeFocusClassFromEmptyInput.bind(this),this.inputIsEmpty()||this.addFocusClass(),this.toggleTarget.addEventListener("focus",this.$module.addFocusClass),this.toggleTarget.addEventListener("blur",this.$module.removeFocusClassFromEmptyInput)},t.prototype.inputIsEmpty=function(){return""===this.toggleTarget.value},t.prototype.addFocusClass=function(){this.toggleTarget.classList.add("focus")},t.prototype.removeFocusClassFromEmptyInput=function(){this.inputIsEmpty()&&this.toggleTarget.classList.remove("focus")},e.GemToggleInputClassOnFocus=t}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e){this.$module=e}t.prototype.init=function(){this.$module.toggleTrigger=this.$module.querySelector("[data-controls][data-expanded]"),this.$module.toggleTrigger&&(this.$module.toggleClass=this.$module.getAttribute("data-toggle-class")||"js-hidden",this.addAriaAttrs(),this.toggleOnClick())},t.prototype.addAriaAttrs=function(){this.$module.toggleTrigger.setAttribute("role","button"),this.$module.toggleTrigger.setAttribute("aria-controls",this.$module.toggleTrigger.getAttribute("data-controls")),this.$module.toggleTrigger.setAttribute("aria-expanded",this.$module.toggleTrigger.getAttribute("data-expanded")),this.$module.targets=this.getTargetElements();for(var e=0;e<this.$module.targets.length;e++)this.$module.targets[e].setAttribute("aria-live","polite"),this.$module.targets[e].setAttribute("role","region")},t.prototype.getTargetElements=function(){var e="#"+this.$module.toggleTrigger.getAttribute("aria-controls").split(" ").join(", #");return this.$module.querySelectorAll(e)},t.prototype.toggleOnClick=function(){var e=this;this.$module.toggleTrigger.addEventListener("click",(function(t){if(t.preventDefault(),"true"===this.getAttribute("aria-expanded")){this.setAttribute("aria-expanded",!1);for(var o=0;o<e.$module.targets.length;o++)e.$module.targets[o].classList.add(e.$module.toggleClass)}else{this.setAttribute("aria-expanded",!0);for(var n=0;n<e.$module.targets.length;n++)e.$module.targets[n].classList.remove(e.$module.toggleClass)}var i=this.getAttribute("data-toggled-text");"string"==typeof i&&(this.setAttribute("data-toggled-text",this.innerText),this.innerText=i)}))},e.GemToggle=t}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.triggerEvent=function(e,t,o){var n,i=o||{},s=i.keyCode;Object.prototype.hasOwnProperty.call(i,"bubbles")||(i.bubbles=!0),Object.prototype.hasOwnProperty.call(i,"cancelable")||(i.cancelable=!0),"function"==typeof window.CustomEvent?n=new window.CustomEvent(t,i):(n=document.createEvent("CustomEvent")).initCustomEvent(t,i.bubbles,i.cancelable,i.detail),s&&(n.keyCode=s),i.shiftKey&&(n.shiftKey=!0),e.dispatchEvent(n)}}(window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GOVUKFrontend={})}(this,(function(e){"use strict";function t(e,t){const o=e.closest(`[${t}]`);return o?o.getAttribute(t):null}function o(e,t){const o=e?e.trim():"";let n,i=null==t?void 0:t.type;switch(i||(["true","false"].includes(o)&&(i="boolean"),o.length>0&&isFinite(Number(o))&&(i="number")),i){case"boolean":n="true"===o;break;case"number":n=Number(o);break;default:n=e}return n}function n(...e){const t={};for(const o of e)for(const e of Object.keys(o)){const i=t[e],s=o[e];c(i)&&c(s)?t[e]=n(i,s):t[e]=s}return t}function i(e,t,n){const i=e.schema.properties[n];if("object"!==(null==i?void 0:i.type))return;const s={[n]:{}};for(const[e,i]of Object.entries(t)){let t=s;const r=e.split(".");for(const[s,a]of r.entries())"object"==typeof t&&(s<r.length-1?(c(t[a])||(t[a]={}),t=t[a]):e!==n&&(t[a]=o(i)))}return s[n]}function s(e,t){return e instanceof HTMLElement&&e.hasAttribute(`data-${t}-init`)}function r(e=document.body){return!!e&&e.classList.contains("govuk-frontend-supported")}function a(e,t){const o=[];for(const[n,i]of Object.entries(e)){const e=[];if(Array.isArray(i)){for(const{required:o,errorMessage:n}of i)o.every((e=>!!t[e]))||e.push(n);"anyOf"!==n||i.length-e.length>=1||o.push(...e)}}return o}function l(e){return Array.isArray(e)}function c(e){return!!e&&"object"==typeof e&&!l(e)}function u(e,t){return`${e.moduleName}: ${t}`}function d(e,t){const n={};for(const[s,r]of Object.entries(e.schema.properties))s in t&&(n[s]=o(t[s],r)),"object"===(null==r?void 0:r.type)&&(n[s]=i(e,t,s));return n}class h extends Error{constructor(...e){super(...e),this.name="GOVUKFrontendError"}}class p extends h{constructor(e=document.body){const t="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(e?t:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class m extends h{constructor(...e){super(...e),this.name="ConfigError"}}class g extends h{constructor(e){let t="string"==typeof e?e:"";if("object"==typeof e){const{component:o,identifier:n,element:i,expectedType:s}=e;t=n,t+=i?` is not of type ${null!=s?s:"HTMLElement"}`:" not found",t=u(o,t)}super(t),this.name="ElementError"}}class f extends h{constructor(e){super("string"==typeof e?e:u(e,"Root element (`$root`) already initialised")),this.name="InitError"}}class v{get $root(){return this._$root}constructor(e){this._$root=void 0;const t=this.constructor;if("string"!=typeof t.moduleName)throw new f("`moduleName` not defined in component");if(!(e instanceof t.elementType))throw new g({element:e,component:t,identifier:"Root element (`$root`)",expectedType:t.elementType.name});this._$root=e,t.checkSupport(),this.checkInitialised();const o=t.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const e=this.constructor,t=e.moduleName;if(t&&s(this.$root,t))throw new f(e)}static checkSupport(){if(!r())throw new p}}v.elementType=HTMLElement;class w{constructor(e={},t={}){var o;this.translations=void 0,this.locale=void 0,this.translations=e,this.locale=null!=(o=t.locale)?o:document.documentElement.lang||"en"}t(e,t){if(!e)throw new Error("i18n: lookup key missing");let o=this.translations[e];if("number"==typeof(null==t?void 0:t.count)&&"object"==typeof o){const n=o[this.getPluralSuffix(e,t.count)];n&&(o=n)}if("string"==typeof o){if(o.match(/%{(.\S+)}/)){if(!t)throw new Error("i18n: cannot replace placeholders in string if no option data provided");return this.replacePlaceholders(o,t)}return o}return e}replacePlaceholders(e,t){const o=Intl.NumberFormat.supportedLocalesOf(this.locale).length?new Intl.NumberFormat(this.locale):void 0;return e.replace(/%{(.\S+)}/g,(function(e,n){if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return!1===e||"number"!=typeof e&&"string"!=typeof e?"":"number"==typeof e?o?o.format(e):`${e}`:e}throw new Error(`i18n: no data found to replace ${e} placeholder in string`)}))}hasIntlPluralRulesSupport(){return Boolean("PluralRules"in window.Intl&&Intl.PluralRules.supportedLocalesOf(this.locale).length)}getPluralSuffix(e,t){if(t=Number(t),!isFinite(t))return"other";const o=this.translations[e],n=this.hasIntlPluralRulesSupport()?new Intl.PluralRules(this.locale).select(t):this.selectPluralFormUsingFallbackRules(t);if("object"==typeof o){if(n in o)return n;if("other"in o)return console.warn(`i18n: Missing plural form ".${n}" for "${this.locale}" locale. Falling back to ".other".`),"other"}throw new Error(`i18n: Plural form ".other" is required for "${this.locale}" locale`)}selectPluralFormUsingFallbackRules(e){e=Math.abs(Math.floor(e));const t=this.getPluralRulesForLocale();return t?w.pluralRules[t](e):"other"}getPluralRulesForLocale(){const e=this.locale.split("-")[0];for(const t in w.pluralRulesMap){const o=w.pluralRulesMap[t];if(o.includes(this.locale)||o.includes(e))return t}}}w.pluralRulesMap={arabic:["ar"],chinese:["my","zh","id","ja","jv","ko","ms","th","vi"],french:["hy","bn","fr","gu","hi","fa","pa","zu"],german:["af","sq","az","eu","bg","ca","da","nl","en","et","fi","ka","de","el","hu","lb","no","so","sw","sv","ta","te","tr","ur"],irish:["ga"],russian:["ru","uk"],scottish:["gd"],spanish:["pt-PT","it","es"],welsh:["cy"]},w.pluralRules={arabic:e=>0===e?"zero":1===e?"one":2===e?"two":e%100>=3&&e%100<=10?"few":e%100>=11&&e%100<=99?"many":"other",chinese:()=>"other",french:e=>0===e||1===e?"one":"other",german:e=>1===e?"one":"other",irish:e=>1===e?"one":2===e?"two":e>=3&&e<=6?"few":e>=7&&e<=10?"many":"other",russian(e){const t=e%100,o=t%10;return 1===o&&11!==t?"one":o>=2&&o<=4&&!(t>=12&&t<=14)?"few":0===o||o>=5&&o<=9||t>=11&&t<=14?"many":"other"},scottish:e=>1===e||11===e?"one":2===e||12===e?"two":e>=3&&e<=10||e>=13&&e<=19?"few":"other",spanish:e=>1===e?"one":e%1e6==0&&0!==e?"many":"other",welsh:e=>0===e?"zero":1===e?"one":2===e?"two":3===e?"few":6===e?"many":"other"};class y extends v{constructor(e,o={}){var i,s;super(e),this.$textarea=void 0,this.$visibleCountMessage=void 0,this.$screenReaderCountMessage=void 0,this.lastInputTimestamp=null,this.lastInputValue="",this.valueChecker=null,this.config=void 0,this.i18n=void 0,this.maxLength=void 0;const r=this.$root.querySelector(".govuk-js-character-count");if(!(r instanceof HTMLTextAreaElement||r instanceof HTMLInputElement))throw new g({component:y,element:r,expectedType:"HTMLTextareaElement or HTMLInputElement",identifier:"Form field (`.govuk-js-character-count`)"});const l=d(y,this.$root.dataset);let c={};("maxwords"in l||"maxlength"in l)&&(c={maxlength:void 0,maxwords:void 0}),this.config=n(y.defaults,o,c,l);const h=a(y.schema,this.config);if(h[0])throw new m(u(y,h[0]));this.i18n=new w(this.config.i18n,{locale:t(this.$root,"lang")}),this.maxLength=null!=(i=null!=(s=this.config.maxwords)?s:this.config.maxlength)?i:1/0,this.$textarea=r;const p=`${this.$textarea.id}-info`,f=document.getElementById(p);if(!f)throw new g({component:y,element:f,identifier:`Count message (\`id="${p}"\`)`});`${f.textContent}`.match(/^\s*$/)&&(f.textContent=this.i18n.t("textareaDescription",{count:this.maxLength})),this.$textarea.insertAdjacentElement("afterend",f);const v=document.createElement("div");v.className="govuk-character-count__sr-status govuk-visually-hidden",v.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=v,f.insertAdjacentElement("afterend",v);const b=document.createElement("div");b.className=f.className,b.classList.add("govuk-character-count__status"),b.setAttribute("aria-hidden","true"),this.$visibleCountMessage=b,f.insertAdjacentElement("afterend",b),f.classList.add("govuk-visually-hidden"),this.$textarea.removeAttribute("maxlength"),this.bindChangeEvents(),window.addEventListener("pageshow",(()=>this.updateCountMessage())),this.updateCountMessage()}bindChangeEvents(){this.$textarea.addEventListener("keyup",(()=>this.handleKeyUp())),this.$textarea.addEventListener("focus",(()=>this.handleFocus())),this.$textarea.addEventListener("blur",(()=>this.handleBlur()))}handleKeyUp(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()}handleFocus(){this.valueChecker=window.setInterval((()=>{(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.updateIfValueChanged()}),1e3)}handleBlur(){this.valueChecker&&window.clearInterval(this.valueChecker)}updateIfValueChanged(){this.$textarea.value!==this.lastInputValue&&(this.lastInputValue=this.$textarea.value,this.updateCountMessage())}updateCountMessage(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()}updateVisibleCountMessage(){const e=this.maxLength-this.count(this.$textarea.value)<0;this.$visibleCountMessage.classList.toggle("govuk-character-count__message--disabled",!this.isOverThreshold()),this.$textarea.classList.toggle("govuk-textarea--error",e),this.$visibleCountMessage.classList.toggle("govuk-error-message",e),this.$visibleCountMessage.classList.toggle("govuk-hint",!e),this.$visibleCountMessage.textContent=this.getCountMessage()}updateScreenReaderCountMessage(){this.isOverThreshold()?this.$screenReaderCountMessage.removeAttribute("aria-hidden"):this.$screenReaderCountMessage.setAttribute("aria-hidden","true"),this.$screenReaderCountMessage.textContent=this.getCountMessage()}count(e){if(this.config.maxwords){var t;return(null!=(t=e.match(/\S+/g))?t:[]).length}return e.length}getCountMessage(){const e=this.maxLength-this.count(this.$textarea.value),t=this.config.maxwords?"words":"characters";return this.formatCountMessage(e,t)}formatCountMessage(e,t){if(0===e)return this.i18n.t(`${t}AtLimit`);const o=e<0?"OverLimit":"UnderLimit";return this.i18n.t(`${t}${o}`,{count:Math.abs(e)})}isOverThreshold(){if(!this.config.threshold)return!0;const e=this.count(this.$textarea.value);return this.maxLength*this.config.threshold/100<=e}}y.moduleName="govuk-character-count",y.defaults=Object.freeze({threshold:0,i18n:{charactersUnderLimit:{one:"You have %{count} character remaining",other:"You have %{count} characters remaining"},charactersAtLimit:"You have 0 characters remaining",charactersOverLimit:{one:"You have %{count} character too many",other:"You have %{count} characters too many"},wordsUnderLimit:{one:"You have %{count} word remaining",other:"You have %{count} words remaining"},wordsAtLimit:"You have 0 words remaining",wordsOverLimit:{one:"You have %{count} word too many",other:"You have %{count} words too many"},textareaDescription:{other:""}}}),y.schema=Object.freeze({properties:{i18n:{type:"object"},maxwords:{type:"number"},maxlength:{type:"number"},threshold:{type:"number"}},anyOf:[{required:["maxwords"],errorMessage:'Either "maxlength" or "maxwords" must be provided'},{required:["maxlength"],errorMessage:'Either "maxlength" or "maxwords" must be provided'}]}),e.CharacterCount=y})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukCharacterCount=window.GOVUKFrontend.CharacterCount,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GOVUKFrontend={})}(this,(function(e){"use strict";function t(e,t){const o=e?e.trim():""
;let n,i=null==t?void 0:t.type;switch(i||(["true","false"].includes(o)&&(i="boolean"),o.length>0&&isFinite(Number(o))&&(i="number")),i){case"boolean":n="true"===o;break;case"number":n=Number(o);break;default:n=e}return n}function o(...e){const t={};for(const n of e)for(const e of Object.keys(n)){const i=t[e],s=n[e];c(i)&&c(s)?t[e]=o(i,s):t[e]=s}return t}function n(e,o,n){const i=e.schema.properties[n];if("object"!==(null==i?void 0:i.type))return;const s={[n]:{}};for(const[e,i]of Object.entries(o)){let o=s;const r=e.split(".");for(const[s,a]of r.entries())"object"==typeof o&&(s<r.length-1?(c(o[a])||(o[a]={}),o=o[a]):e!==n&&(o[a]=t(i)))}return s[n]}function i(e){if(e.includes("#"))return e.split("#").pop()}function s(e,t={}){function o(){e.addEventListener("blur",n,{once:!0})}function n(){var o;null==(o=t.onBlur)||o.call(e),s||e.removeAttribute("tabindex")}var i;const s=e.getAttribute("tabindex");s||e.setAttribute("tabindex","-1"),e.addEventListener("focus",o,{once:!0}),null==(i=t.onBeforeFocus)||i.call(e),e.focus()}function r(e,t){return e instanceof HTMLElement&&e.hasAttribute(`data-${t}-init`)}function a(e=document.body){return!!e&&e.classList.contains("govuk-frontend-supported")}function l(e){return Array.isArray(e)}function c(e){return!!e&&"object"==typeof e&&!l(e)}function u(e,t){return`${e.moduleName}: ${t}`}function d(e,o){const i={};for(const[s,r]of Object.entries(e.schema.properties))s in o&&(i[s]=t(o[s],r)),"object"===(null==r?void 0:r.type)&&(i[s]=n(e,o,s));return i}class h extends Error{constructor(...e){super(...e),this.name="GOVUKFrontendError"}}class p extends h{constructor(e=document.body){const t="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(e?t:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class m extends h{constructor(e){let t="string"==typeof e?e:"";if("object"==typeof e){const{component:o,identifier:n,element:i,expectedType:s}=e;t=n,t+=i?` is not of type ${null!=s?s:"HTMLElement"}`:" not found",t=u(o,t)}super(t),this.name="ElementError"}}class g extends h{constructor(e){super("string"==typeof e?e:u(e,"Root element (`$root`) already initialised")),this.name="InitError"}}class f{get $root(){return this._$root}constructor(e){this._$root=void 0;const t=this.constructor;if("string"!=typeof t.moduleName)throw new g("`moduleName` not defined in component");if(!(e instanceof t.elementType))throw new m({element:e,component:t,identifier:"Root element (`$root`)",expectedType:t.elementType.name});this._$root=e,t.checkSupport(),this.checkInitialised();const o=t.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const e=this.constructor,t=e.moduleName;if(t&&r(this.$root,t))throw new g(e)}static checkSupport(){if(!a())throw new p}}f.elementType=HTMLElement;class v extends f{constructor(e,t={}){super(e),this.config=void 0,this.config=o(v.defaults,t,d(v,this.$root.dataset)),this.config.disableAutoFocus||s(this.$root),this.$root.addEventListener("click",(e=>this.handleClick(e)))}handleClick(e){const t=e.target;t&&this.focusTarget(t)&&e.preventDefault()}focusTarget(e){if(!(e instanceof HTMLAnchorElement))return!1;const t=i(e.href);if(!t)return!1;const o=document.getElementById(t);if(!o)return!1;const n=this.getAssociatedLegendOrLabel(o);return!!n&&(n.scrollIntoView(),o.focus({preventScroll:!0}),!0)}getAssociatedLegendOrLabel(e){var t;const o=e.closest("fieldset");if(o){const t=o.getElementsByTagName("legend");if(t.length){const o=t[0];if(e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type))return o;const n=o.getBoundingClientRect().top,i=e.getBoundingClientRect();if(i.height&&window.innerHeight){if(i.top+i.height-n<window.innerHeight/2)return o}}}return null!=(t=document.querySelector(`label[for='${e.getAttribute("id")}']`))?t:e.closest("label")}}v.moduleName="govuk-error-summary",v.defaults=Object.freeze({disableAutoFocus:!1}),v.schema=Object.freeze({properties:{disableAutoFocus:{type:"boolean"}}}),e.ErrorSummary=v})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukErrorSummary=window.GOVUKFrontend.ErrorSummary,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GOVUKFrontend={})}(this,(function(e){"use strict";function t(e,t){return e instanceof HTMLElement&&e.hasAttribute(`data-${t}-init`)}function o(e=document.body){return!!e&&e.classList.contains("govuk-frontend-supported")}function n(e,t){return`${e.moduleName}: ${t}`}class i extends Error{constructor(...e){super(...e),this.name="GOVUKFrontendError"}}class s extends i{constructor(e=document.body){const t="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(e?t:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class r extends i{constructor(e){let t="string"==typeof e?e:"";if("object"==typeof e){const{component:o,identifier:i,element:s,expectedType:r}=e;t=i,t+=s?` is not of type ${null!=r?r:"HTMLElement"}`:" not found",t=n(o,t)}super(t),this.name="ElementError"}}class a extends i{constructor(e){super("string"==typeof e?e:n(e,"Root element (`$root`) already initialised")),this.name="InitError"}}class l{get $root(){return this._$root}constructor(e){this._$root=void 0;const t=this.constructor;if("string"!=typeof t.moduleName)throw new a("`moduleName` not defined in component");if(!(e instanceof t.elementType))throw new r({element:e,component:t,identifier:"Root element (`$root`)",expectedType:t.elementType.name});this._$root=e,t.checkSupport(),this.checkInitialised();const o=t.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const e=this.constructor,o=e.moduleName;if(o&&t(this.$root,o))throw new a(e)}static checkSupport(){if(!o())throw new s}}l.elementType=HTMLElement;class c extends l{constructor(e){super(e),this.$inputs=void 0;const t=this.$root.querySelectorAll('input[type="radio"]');if(!t.length)throw new r({component:c,identifier:'Form inputs (`<input type="radio">`)'});this.$inputs=t,this.$inputs.forEach((e=>{const t=e.getAttribute("data-aria-controls");if(t){if(!document.getElementById(t))throw new r({component:c,identifier:`Conditional reveal (\`id="${t}"\`)`});e.setAttribute("aria-controls",t),e.removeAttribute("data-aria-controls")}})),window.addEventListener("pageshow",(()=>this.syncAllConditionalReveals())),this.syncAllConditionalReveals(),this.$root.addEventListener("click",(e=>this.handleClick(e)))}syncAllConditionalReveals(){this.$inputs.forEach((e=>this.syncConditionalRevealWithInputState(e)))}syncConditionalRevealWithInputState(e){const t=e.getAttribute("aria-controls");if(!t)return;const o=document.getElementById(t);if(null!=o&&o.classList.contains("govuk-radios__conditional")){const t=e.checked;e.setAttribute("aria-expanded",t.toString()),o.classList.toggle("govuk-radios__conditional--hidden",!t)}}handleClick(e){const t=e.target;if(!(t instanceof HTMLInputElement)||"radio"!==t.type)return;const o=document.querySelectorAll('input[type="radio"][aria-controls]'),n=t.form,i=t.name;o.forEach((e=>{const t=e.form===n;e.name===i&&t&&this.syncConditionalRevealWithInputState(e)}))}}c.moduleName="govuk-radios",e.Radios=c})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukRadios=window.GOVUKFrontend.Radios,window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(e){function t(e){this.$module=e,this.$module.actions={},this.$module.rememberShownStep=!1,this.$module.stepNavSize=!1,this.$module.sessionStoreLink="govuk-step-nav-active-link",this.$module.activeLinkClass="gem-c-step-nav__list-item--active",this.$module.activeStepClass="gem-c-step-nav__step--active",this.$module.activeLinkHref="#content",this.$module.uniqueId=!1}t.prototype.init=function(){this.$module.classList.add("gem-c-step-nav--active"),this.$module.classList.remove("js-hidden"),this.$module.stepNavSize=this.$module.classList.contains("gem-c-step-nav--large")?"Big":"Small",this.$module.rememberShownStep=!!this.$module.hasAttribute("data-remember")&&"Big"===this.$module.stepNavSize,this.$module.steps=this.$module.querySelectorAll(".js-step"),this.$module.stepHeaders=this.$module.querySelectorAll(".js-toggle-panel"),this.$module.totalSteps=this.$module.querySelectorAll(".js-panel").length,this.$module.totalLinks=this.$module.querySelectorAll(".gem-c-step-nav__link").length,this.$module.showOrHideAllButton=!1,this.$module.uniqueId=this.$module.getAttribute("data-id")||!1,this.$module.dataModule=this.$module.getAttribute("data-module"),this.$module.isGa4Enabled=!!this.$module.dataModule&&-1!==this.$module.dataModule.indexOf("ga4-event-tracker"),this.$module.uniqueId&&(this.$module.sessionStoreLink=this.$module.sessionStoreLink+"_"+this.$module.uniqueId),this.getTextForInsertedElements(),this.addButtonstoSteps(),this.addShowHideAllButton(),this.addShowHideToggle(),this.addAriaControlsAttrForShowHideAllButton(),this.ensureOnlyOneActiveLink(),this.showPreviouslyOpenedSteps(),this.bindToggleForSteps(),this.bindToggleShowHideAllButton(),this.bindComponentLinkClicks()},t.prototype.getTextForInsertedElements=function(){this.$module.actions.showText=this.$module.getAttribute("data-show-text"),this.$module.actions.hideText=this.$module.getAttribute("data-hide-text"),this.$module.actions.showAllText=this.$module.getAttribute("data-show-all-text"),this.$module.actions.hideAllText=this.$module.getAttribute("data-hide-all-text")},t.prototype.addShowHideAllButton=function(){var e=document.createElement("div"),t=this.$module.querySelectorAll(".gem-c-step-nav__steps")[0];if(e.className="gem-c-step-nav__controls govuk-!-display-none-print",e.innerHTML='<button aria-expanded="false" class="gem-c-step-nav__button gem-c-step-nav__button--controls js-step-controls-button"><span class="gem-c-step-nav__chevron gem-c-step-nav__chevron--down js-step-controls-button-icon"></span><span class="gem-c-step-nav__button-text gem-c-step-nav__button-text--all js-step-controls-button-text">'+this.$module.actions.showAllText+"</span></button>",this.$module.insertBefore(e,t),this.$module.showOrHideAllButton=this.$module.querySelectorAll(".js-step-controls-button")[0],this.$module.isGa4Enabled){var o={event_name:"select_content",type:"step by step",index_section:0,index_section_count:this.$module.totalSteps};this.$module.showOrHideAllButton.setAttribute("data-ga4-event",JSON.stringify(o))}},t.prototype.addShowHideToggle=function(){for(var e=0;e<this.$module.stepHeaders.length;e++){var t=this.$module.stepHeaders[e];if(!t.querySelectorAll(".js-toggle-link").length){var o=document.createElement("span"),n=document.createElement("span"),i=document.createElement("span"),s=document.createElement("span"),r=document.createElement("span");o.className="gem-c-step-nav__toggle-link js-toggle-link govuk-!-display-none-print",n.className="gem-c-step-nav__button-text js-toggle-link-text",i.className="gem-c-step-nav__chevron js-toggle-link-icon",s.className="gem-c-step-nav__toggle-link-focus",r.className="govuk-visually-hidden",o.appendChild(s),s.appendChild(i),s.appendChild(n),r.innerHTML=" this section",o.appendChild(r),t.querySelectorAll(".js-step-title-button")[0].appendChild(o)}}},t.prototype.headerIsOpen=function(e){return void 0!==e.parentNode.getAttribute("show")},t.prototype.addAriaControlsAttrForShowHideAllButton=function(){var e=this.$module.querySelectorAll(".js-panel")[0].getAttribute("id");this.$module.showOrHideAllButton.setAttribute("aria-controls",e)},t.prototype.setAllStepsShownState=function(e){for(var t=[],o=0;o<this.$module.steps.length;o++){new this.StepView(this.$module.steps[o],this.$module).setIsShown(e),e&&t.push(this.$module.steps[o].getAttribute("id"))}e?this.saveToSessionStorage(this.$module.uniqueId,JSON.stringify(t)):this.removeFromSessionStorage(this.$module.uniqueId)},t.prototype.showPreviouslyOpenedSteps=function(){for(var e=this.loadFromSessionStorage(this.$module.uniqueId)||[],t=0;t<this.$module.steps.length;t++){var o=this.$module.steps[t],n=o.getAttribute("id"),i=new this.StepView(o,this.$module),s=o.hasAttribute("data-show");this.$module.rememberShownStep&&e.indexOf(n)>-1||s&&"undefined"!==s?i.setIsShown(!0):i.setIsShown(!1)}e.length>0&&(this.$module.showOrHideAllButton.setAttribute("aria-expanded",!0),this.setShowHideAllText())},t.prototype.addButtonstoSteps=function(){for(var e=0;e<this.$module.steps.length;e++){var t=this.$module.steps[e],o=t.querySelectorAll(".js-step-title")[0],n=t.querySelectorAll(".js-panel")[0].getAttribute("id"),i=o.textContent||o.innerText;if(o.outerHTML='<span class="js-step-title"><button class="gem-c-step-nav__button gem-c-step-nav__button--title js-step-title-button" aria-expanded="false" aria-controls="'+n+'"><span class="gem-c-step-nav____title-text-focus"><span class="gem-c-step-nav__title-text js-step-title-text">'+i+'</span><span class="govuk-visually-hidden gem-c-step-nav__section-heading-divider">, </span></span></button></span>',this.$module.isGa4Enabled){var s={event_name:"select_content",type:"step by step",text:i.trim(),index_section:e+1,index_section_count:this.$module.totalSteps,index_total:t.querySelectorAll("a").length};t.querySelector(".js-step-title-button").setAttribute("data-ga4-event",JSON.stringify(s))}}},t.prototype.bindToggleForSteps=function(){for(var e=this,t=this.$module.querySelectorAll(".js-toggle-panel"),o=0;o<t.length;o++)t[o].addEventListener("click",(function(){new e.StepView(this.parentNode,e.$module).toggle(),e.setShowHideAllText(),e.rememberStepState(this.parentNode)}))},t.prototype.rememberStepState=function(e){if(this.$module.rememberShownStep){var t=JSON.parse(this.loadFromSessionStorage(this.$module.uniqueId))||[],o=e.getAttribute("id");if(e.classList.contains("step-is-shown"))t.push(o);else{var n=t.indexOf(o);n>-1&&t.splice(n,1)}this.saveToSessionStorage(this.$module.uniqueId,JSON.stringify(t))}},t.prototype.bindComponentLinkClicks=function(){for(var e=this.$module.querySelectorAll(".js-link"),t=this,o=0;o<e.length;o++)e[o].addEventListener("click",(function(){var e=this.getAttribute("data-position");"external"!==this.getAttribute("rel")&&t.saveToSessionStorage(t.$module.sessionStoreLink,e),this.getAttribute("href")===t.$module.activeLinkHref&&(t.setOnlyThisLinkActive(this),t.setActiveStepClass())}))},t.prototype.saveToSessionStorage=function(e,t){window.sessionStorage.setItem(e,t)},t.prototype.loadFromSessionStorage=function(e){return window.sessionStorage.getItem(e)},t.prototype.removeFromSessionStorage=function(e){window.sessionStorage.removeItem(e)},t.prototype.setOnlyThisLinkActive=function(e){for(var t=this.$module.querySelectorAll("."+this.$module.activeLinkClass),o=0;o<t.length;o++)t[o].classList.remove(this.$module.activeLinkClass);e.parentNode.classList.add(this.$module.activeLinkClass)},t.prototype.ensureOnlyOneActiveLink=function(){var e=this.$module.querySelectorAll(".js-list-item."+this.$module.activeLinkClass);if(!(e.length<=1)){var t=this.loadFromSessionStorage(this.$module.sessionStoreLink),o=this.$module.querySelectorAll("."+this.$module.activeLinkClass)[0].firstChild.getAttribute("data-position"),n=t||o,i=this.$module.querySelectorAll('[data-position="'+n+'"]')[0];i?i.parentNode.classList.contains(this.$module.activeLinkClass)||(n=i):n=o,this.removeActiveStateFromAllButCurrent(e,n),this.setActiveStepClass()}},t.prototype.removeActiveStateFromAllButCurrent=function(e,t){for(var o=0;o<e.length;o++){var n=e[o];if(n.querySelectorAll(".js-link")[0].getAttribute("data-position").toString()!==t.toString()){n.classList.remove(this.$module.activeLinkClass);var i=n.querySelectorAll(".visuallyhidden");i.length&&i[0].parentNode.removeChild(i[0])}}},t.prototype.setActiveStepClass=function(){for(var e=this.$module.querySelectorAll("."+this.$module.activeStepClass),t=0;t<e.length;t++)e[t].classList.remove(this.$module.activeStepClass),e[t].removeAttribute("data-show");var o=this.$module.querySelectorAll("."+this.$module.activeLinkClass)[0];if(o){var n=o.closest(".gem-c-step-nav__step");n.classList.add(this.$module.activeStepClass),n.setAttribute("data-show","")}},t.prototype.bindToggleShowHideAllButton=function(){var e=this;this.$module.showOrHideAllButton.addEventListener("click",(function(){var t=(this.textContent||this.innerText)===e.$module.actions.showAllText;return e.setAllStepsShownState(t),e.$module.showOrHideAllButton.setAttribute("aria-expanded",t),e.setShowHideAllText(),!1}))},t.prototype.setShowHideAllText=function(){var e=this.$module.querySelectorAll(".step-is-shown").length,t=this.$module.showOrHideAllButton.querySelector(".js-step-controls-button-icon"),o=this.$module.showOrHideAllButton.querySelector(".js-step-controls-button-text");e===this.$module.totalSteps?(o.innerHTML=this.$module.actions.hideAllText,t.classList.remove("gem-c-step-nav__chevron--down")):(o.innerHTML=this.$module.actions.showAllText,t.classList.add("gem-c-step-nav__chevron--down"))},t.prototype.StepView=function(e,t){this.stepElement=e,this.stepContent=this.stepElement.querySelectorAll(".js-panel")[0],this.titleButton=this.stepElement.querySelectorAll(".js-step-title-button")[0];var o=this.stepElement.querySelectorAll(".js-step-title-text")[0];this.title=o.textContent||o.innerText,this.title=this.title.replace(/^\s+|\s+$/g,""),this.showText=t.actions.showText,this.hideText=t.actions.hideText,this.upChevronSvg=t.upChevronSvg,this.downChevronSvg=t.downChevronSvg,this.show=function(){this.setIsShown(!0)},this.hide=function(){this.setIsShown(!1)},this.toggle=function(){this.setIsShown(this.isHidden())},this.setIsShown=function(e){var t=this.stepElement.querySelectorAll(".js-toggle-link")[0],o=t.querySelector(".js-toggle-link-text"),n=t.querySelector(".js-toggle-link-icon");e?(this.stepElement.classList.add("step-is-shown"),this.stepContent.classList.remove("js-hidden"),o.innerHTML=this.hideText,n.classList.remove("gem-c-step-nav__chevron--down")):(this.stepElement.classList.remove("step-is-shown"),this.stepContent.classList.add("js-hidden"),o.innerHTML=this.showText,n.classList.add("gem-c-step-nav__chevron--down")),this.titleButton.setAttribute("aria-expanded",e)},this.isShown=function(){return this.stepElement.classList.contains("step-is-shown")},this.isHidden=function(){return!this.isShown()},this.numberOfContentItems=function(){return this.stepContent.querySelectorAll(".js-link").length}},t.prototype.StepToggleClick=function(e,t,o,n){this.target=e.target,this.stepIsOptional=o,this.stepNavSize=n,this.stepIndex=function(){return this.$module.steps.index(t.element)+1},this.locateClickElement=function(){return this.clickedOnIcon()?this.iconType()+" click":this.clickedOnHeading()?"Heading click":"Elsewhere click"},this.clickedOnIcon=function(){return this.target.classList.contains("js-toggle-link")},this.clickedOnHeading=function(){return this.target.classList.contains("js-step-title-text")},this.iconType=function(){return t.isHidden()?"Minus":"Plus"},this.isOptional=function(){return this.stepIsOptional?" ; optional":""}},e.Gemstepnav=t}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=GOVUK||{},GOVUK.feedback={},GOVUK.feedback.saveReferrerToCookie=function(){GOVUK.cookie("govuk_contact_referrer",document.referrer,{days:1})},GOVUK.feedback.prepopulateFormBasedOnReferrer=function(e){var t=GOVUK.cookie("govuk_contact_referrer")||document.referrer,o=/[^\s=/?&]+(?:@|%40)[^\s=/?&]+/g;t=t.replace(o,"[email]");var n=this.getPathFor(t),i=e.querySelector('input[name="contact[link]"]'),s=e.querySelector('input[name="contact[location]"][value="specific"]');i&&!i.value&&"/contact"!==n&&(i.value=t),s&&i&&i.value&&(s.checked=!0)},GOVUK.feedback.getPathFor=function(e){var t=document.createElement("a");return t.href=e,t.pathname},GOVUK.feedback.appendHiddenInputs=function(e,t){var o=document.createElement("input");o.type="hidden",o.name=t+"[javascript_enabled]",o.value="true",e.appendChild(o);var n=document.createElement("input");n.type="hidden",n.name=t+"[referrer]",n.value=document.referrer,e.appendChild(n)},GOVUK.feedback.getLocationPathname=function(){return window.location.pathname},GOVUK.feedback.init=function(){"/contact"===this.getLocationPathname()&&this.saveReferrerToCookie();var e=document.querySelector("form.contact-form"),t=document.querySelector("form.service-feedback");e?(this.prepopulateFormBasedOnReferrer(e),this.appendHiddenInputs(e,"contact")):t&&this.appendHiddenInputs(t,"service_feedback")},GOVUK.feedback.init()}();