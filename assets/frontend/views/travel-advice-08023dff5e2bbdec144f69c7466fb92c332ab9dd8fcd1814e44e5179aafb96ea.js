(function(){"use strict";var e=this;void 0===e.GOVUK&&(e.GOVUK={});var t=function(e){var t=13,n=this;if(this.container=e.closest(".js-travel-container"),e.addEventListener("keydown",(function(e){e.keyCode===t&&e.preventDefault()})),e.addEventListener("keyup",(function(){var e=this.value;n.filterListItems(e)})),this.container){var r=this.container.getElementsByClassName("js-country-count")[0];r&&r.setAttribute("aria-live","polite")}};t.prototype.filterHeadings=function(e){for(var t=this,n=function(e){for(var n=t.container.querySelector("#"+e.toUpperCase()).querySelectorAll("li"),r=[],l=0;l<n.length;l++){var i="none"===n[l].style.display?n[l]:void 0;i&&r.push(i)}return r.length<n.length},r=0;r<e.length;r++){n(e[r].textContent.match(/[A-Z]{1}$/)[0])?e[r].parentNode.style.display="":e[r].parentNode.style.display="none"}},t.prototype.doesSynonymMatch=function(e,t){for(var n=e.getAttribute("data-synonyms").split("|"),r=[],l=0;l<n.length;l++)n[l].toLowerCase().indexOf(t.toLowerCase())>-1&&r.push(n[l]);return r},t.prototype.filterListItems=function(e){var t=this.container.querySelectorAll("h3.countries-initial-letter"),n=this.container.querySelectorAll("ul.js-countries-list li"),r=0,l=!1,i=this,o=0,s=null;for(o=0;o<n.length;o++){var a=(s=n[o]).getElementsByTagName("a")[0];s.textContent="",s.appendChild(a),s.style.display=""}if((e=e.replace(/^\s+|\s+$/g,""))&&e.length>0){var c=0;for(o=0;o<n.length;o++)(s=n[o]).children[0].firstChild.textContent.toLowerCase().includes(e.toLowerCase())?s.style.display="":(s.style.display="none",c+=1);for(r=n.length-c,o=0;o<n.length;o++){s=n[o];var u=i.doesSynonymMatch(s,e);if(u.length>0){l=!0,s.style.display="";for(var y=0;y<u.length;y++)s.appendChild(document.createTextNode("("+u[y]+") "))}}if(l)for(r=0,o=0;o<n.length;o++)"none"!==n[o].style.display&&(r+=1)}else{for(o=0;o<t.length;o++)t[o].style.display="";r=n.length}this.filterHeadings(t),this.updateCounter(r)},t.prototype.updateCounter=function(e){var t=this.container.getElementsByClassName("js-country-count")[0];this.container.getElementsByClassName("js-filter-count")[0].innerText=e,t.innerHTML=t.innerHTML.replace(/\s*results$/,""),0==e&&t.appendChild(document.createTextNode(" results"))},GOVUK.countryFilter=t;for(var n=e.document.querySelectorAll("input#country"),r=0;r<n.length;r++)new GOVUK.countryFilter(n[r])}).call(this);