!function(){"use strict";window.GOVUK=window.GOVUK||{};var t={essential:!0,settings:!1,usage:!1,campaigns:!1},e={cookies_policy:"essential",seen_cookie_message:"essential",cookie_preferences_set:"essential",cookies_preferences_set:"essential","_email-alert-frontend_session":"essential",intervention_campaign:"essential",licensing_session:"essential",govuk_contact_referrer:"essential",multivariatetest_cohort_coronavirus_extremely_vulnerable_rate_limit:"essential",dgu_beta_banner_dismissed:"settings",global_bar_seen:"settings",user_nation:"settings","JS-Detection":"usage",TLSversion:"usage",_ga_VBLT2V3FZR:"usage",_ga_P1DGM6TVYF:"usage",_ga_S5RQ7FTGVR:"usage"};window.GOVUK.cookie=function(t,e,o){return void 0!==e?!1===e||null===e?window.GOVUK.setCookie(t,"",{days:-1}):(void 0===o&&(o={days:30}),window.GOVUK.setCookie(t,e,o)):window.GOVUK.getCookie(t)},window.GOVUK.setDefaultConsentCookie=function(){window.GOVUK.setConsentCookie(t)},window.GOVUK.approveAllCookieTypes=function(){var t={essential:!0,settings:!0,usage:!0,campaigns:!0};window.GOVUK.setCookie("cookies_policy",JSON.stringify(t),{days:365})},window.GOVUK.getConsentCookie=function(){var t,e=window.GOVUK.cookie("cookies_policy");if(!e)return null;try{t=JSON.parse(e)}catch(t){return null}return"object"!=typeof t&&null!==t&&(t=JSON.parse(t)),t},window.GOVUK.setConsentCookie=function(o){var i=window.GOVUK.getConsentCookie();for(var n in i||(i=JSON.parse(JSON.stringify(t))),o)if(i[n]=o[n],!o[n])for(var s in e)e[s]===n&&window.GOVUK.deleteCookie(s);window.GOVUK.setCookie("cookies_policy",JSON.stringify(i),{days:365})},window.GOVUK.checkConsentCookieCategory=function(t,o){var i=window.GOVUK.getConsentCookie();if(!i&&e[t])return!0;i=window.GOVUK.getConsentCookie();try{return i[o]}catch(t){return console.error(t),!1}},window.GOVUK.checkConsentCookie=function(t,o){if("cookies_policy"===t||null===o||!1===o)return!0;if(t.match("^govuk_surveySeen")||t.match("^govuk_taken"))return window.GOVUK.checkConsentCookieCategory(t,"settings");if(e[t]){var i=e[t];return window.GOVUK.checkConsentCookieCategory(t,i)}return!1},window.GOVUK.setCookie=function(t,e,o){if(window.GOVUK.checkConsentCookie(t,e)){void 0===o&&(o={});var i=t+"="+e+"; path=/";if(o.days){var n=new Date;n.setTime(n.getTime()+24*o.days*60*60*1e3),i=i+"; expires="+n.toGMTString()}"https:"===document.location.protocol&&(i+="; Secure"),document.cookie=i}},window.GOVUK.getCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),i=0,n=o.length;i<n;i++){for(var s=o[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return decodeURIComponent(s.substring(e.length))}return null},window.GOVUK.getCookieCategory=function(t){return e[t]},window.GOVUK.deleteCookie=function(t){window.GOVUK.cookie(t,null),window.GOVUK.expireCookie(t)},window.GOVUK.expireCookie=function(t,e=""){var o=new Date(0);document.cookie=t+"="+e+";expires="+o+";",document.cookie=t+"="+e+";expires="+o+";domain="+window.location.hostname+";path=/"},window.GOVUK.deleteUnconsentedCookies=function(){var t=window.GOVUK.getConsentCookie();for(var o in t)if(!t[o])for(var i in e)e[i]===o&&window.GOVUK.deleteCookie(i)}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.submitSettingsForm=this.submitSettingsForm.bind(this),document.querySelector("form[data-module=cookie-settings]").addEventListener("submit",this.$module.submitSettingsForm),window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.init(this.setInitialFormValues.bind(this)):this.setInitialFormValues()},e.prototype.setInitialFormValues=function(){window.GOVUK.cookie("cookies_policy")||window.GOVUK.useSingleConsentApi||window.GOVUK.setDefaultConsentCookie();var t=window.GOVUK.cookie("cookies_policy");if(t){var e=JSON.parse(t);for(var o in delete e.essential,e){var i;(i=e[o]?document.querySelector("input[name=cookies-"+o+"][value=on]"):document.querySelector("input[name=cookies-"+o+"][value=off]"))&&(i.checked=!0)}}},e.prototype.submitSettingsForm=function(t){t.preventDefault();for(var e=t.target.getElementsByTagName("input"),o={},i=0;i<e.length;i++){var n=e[i];if(n.checked){var s=n.name.replace("cookies-",""),r="on"===n.value;o[s]=r,"usage"!==s||r||(window.GOVUK.stopSendingAnalytics=!0,window.GOVUK.LUX={})}}return window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.setPreferences(null,o):(window.GOVUK.setConsentCookie(o),window.GOVUK.setCookie("cookies_preferences_set",!0,{days:365})),this.showConfirmationMessage(),!1},e.prototype.showConfirmationMessage=function(){var t=document.querySelector("div[data-cookie-confirmation]");t.style.display="none";var o=document.querySelector(".cookie-settings__prev-page"),i=e.prototype.getReferrerLink();document.body.scrollTop=document.documentElement.scrollTop=0,o&&(i&&i!==document.location.pathname?(o.href=i,o.style.display="inline"):o.style.display="none"),t.style.display="block"},e.prototype.getReferrerLink=function(){var t=!1;try{t=document.referrer||new URL(document.referrer).pathname}catch(t){console.warn("Error grabbing referrer for cookie settings",window.location,t)}return t},t.CookieSettings=e}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.extendObject=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var o in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],o)&&(t[o]=arguments[e][o]);return t}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t,e){for(var o in this.$table=t,this.options={outOf:65,applyOnInit:!0,autoOutdent:!1,outdentAll:!1,chartVisibleText:"Change to table and accessible view",tableVisibleText:"Change to chart view",chartAlertText:"Chart visible",tableAlertText:"Table visible",toggleAfter:!1,returnReference:!1},e)this.options[o]=e[o]}e.prototype.init=function(){(this.detectIEVersion(),this.ENABLED=!(this.ie&&this.ie<8),this.$graphContainer=document.createElement("div"),this.$graphContainer.className="mc-chart-container",this.$graph=document.createElement("div"),this.$graph.setAttribute("aria-hidden","true"),this.$graph.setAttribute("class",this.$table.className),this.$graph.classList.add("mc-chart"),this.chartId=this.getChartId(),this.options.stacked=this.$table.classList.contains("mc-stacked"),this.options.stacked)&&(0===this.$table.querySelectorAll("thead th").length&&(this.ENABLED=!1));this.options.negative=this.$table.classList.contains("mc-negative");var t=this.$table.querySelectorAll("tbody tr")[0].querySelectorAll("th, td").length>2;if(this.options.multiple=!this.options.stacked&&(this.$table.classList.contains("mc-multiple")||t),this.options.autoOutdent=this.options.autoOutdent||this.$table.classList.contains("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.classList.contains("mc-outdented"),this.options.multiple&&this.$graph.classList.add("mc-multiple"),this.options.hasCaption=!!this.$table.querySelectorAll("caption").length,this.ENABLED&&(this.apply(),this.options.applyOnInit||this.toggleLink.click()),this.options.returnReference)return this},e.prototype.detectIEVersion=function(){this.ie=function(){var t,e=3,o=document.createElement("div"),i=o.getElementsByTagName("i");do{o.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->"}while(e<10&&i[0]);return e>4?e:t}()},e.prototype.apply=function(){if(this.ENABLED)try{this.constructChart(),this.addClassesToHeader(),this.applyWidths(),this.insert(),this.$table.classList.add("mc-hidden"),this.applyOutdent()}catch(t){console.error("MagnaCharta error:",t)}},e.prototype.construct={},e.prototype.construct.thead=function(){var t=document.createElement("div");t.classList.add("mc-thead");var e=document.createElement("div");e.classList.add("mc-tr");for(var o="",i=this.$table.querySelectorAll("thead th"),n=0;n<i.length;n++)o+='<div class="mc-th">',o+=i[n].innerHTML,o+="</div>";return e.innerHTML=o,t.appendChild(e),t},e.prototype.construct.tbody=function(){var t=document.createElement("div");t.classList.add("mc-tbody");for(var e=this.$table.querySelectorAll("tbody tr"),o=0;o<e.length;o++){var i=document.createElement("div");i.classList.add("mc-tr");for(var n="",s=e[o].querySelectorAll("th, td"),r=0;r<s.length;r++)n+='<div class="mc-td">',n+=s[r].innerHTML,n+="</div>";i.innerHTML=n,t.appendChild(i)}return t},e.prototype.construct.caption=function(){return this.$table.querySelector("caption").cloneNode(!0)},e.prototype.construct.toggleLink=function(t){var e=document.createElement("button"),o=document.createElement("span"),i=document.createElement("span");return o.classList.add("mc-toggle-text"),o.innerHTML=t,i.classList.add("govuk-visually-hidden","mc-toggle-status"),i.setAttribute("role","alert"),e.classList.add("govuk-body-s","mc-toggle-button"),e.appendChild(o),e.appendChild(i),e},e.prototype.addToggleClick=function(t,e,o,i){var n=this;this.toggleLink.addEventListener("click",(function(s){s.preventDefault();var r=n.toggleLink.querySelector(".mc-toggle-text"),a=n.toggleLink.querySelector(".mc-toggle-status");n.$graphContainer.classList.toggle("mc-hidden"),n.$table.classList.toggle("mc-hidden"),r.innerHTML=r.innerHTML===e?t:e,a.innerHTML=a.innerHTML===i?o:i}))},e.prototype.constructChart=function(){var t=this.construct.thead.call(this),e=this.construct.tbody.call(this);if(this.toggleLink=this.construct.toggleLink(this.options.chartVisibleText),this.addToggleClick(this.options.chartVisibleText,this.options.tableVisibleText,this.options.chartAlertText,this.options.tableAlertText),this.options.hasCaption){var o=this.construct.caption.call(this);this.$graph.appendChild(o)}this.options.toggleAfter?this.$table.insertAdjacentElement("afterend",this.toggleLink):this.$table.insertAdjacentElement("beforebegin",this.toggleLink),this.$graph.appendChild(t),this.$graph.appendChild(e)},e.prototype.utils={isFloat:function(t){return!isNaN(parseFloat(t))},stripValue:function(t){return t.replace(/,|\xa3|%|[a-z]/gi,"")},returnMax:function(t){for(var e=0,o=0;o<t.length;o++)t[o]>e&&(e=t[o]);return e},isNegative:function(t){return t<0}},e.prototype.addClassesToHeader=function(){var t=this.$graph.querySelectorAll(".mc-th"),e=t.length;this.options.stacked&&(t[e-1].classList.add("mc-stacked-header","mc-header-total"),e-=1);for(var o=1;o<e;o++)t[o].classList.add("mc-key-header"),t[o].classList.contains("mc-stacked-header")||t[o].classList.add("mc-key-"+o)},e.prototype.calculateMaxWidth=function(){for(var t=[],e=0,o=this.$graph.querySelectorAll(".mc-tr"),i=0;i<o.length;i++){for(var n=o[i],s=n.querySelectorAll(".mc-td"),r=[],a=1;a<s.length;a++)r.push(s[a]);var l=r.length;if(l){this.options.stacked&&(r[l-1].classList.add("mc-stacked-total"),l-=1);var c=n.querySelector(".mc-td");c&&c.classList.add("mc-key-cell");for(var u=0,d=0;d<l;d++){var h=r[d];h.classList.add("mc-bar-cell"),h.classList.add("mc-bar-"+(d+1));var p=this.utils.stripValue(h.innerText);if(this.utils.isFloat(p)){var g=parseFloat(p,10),m=Math.abs(g);0===g&&h.classList.add("mc-bar-zero"),this.options.negative&&(this.utils.isNegative(g)?(h.classList.add("mc-bar-negative"),m>e&&(e=m)):h.classList.add("mc-bar-positive")),g=m,this.options.stacked?u+=g:(u=g,t.push(g))}}}this.options.stacked&&t.push(u)}var f={};return f.max=parseFloat(this.utils.returnMax(t),10),f.single=parseFloat(this.options.outOf/f.max,10),this.options.negative&&(f.marginLeft=parseFloat(e,10)*f.single,f.maxNegative=parseFloat(e,10)),f},e.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();for(var t=this.$graph.querySelectorAll(".mc-tr"),e=0;e<t.length;e++)for(var o=t[e].querySelectorAll(".mc-bar-cell"),i=0;i<o.length;i++){var n=o[i],s=parseFloat(this.utils.stripValue(n.innerText),10),r=s*this.dimensions.single,a=Math.abs(s),l=Math.abs(r);if(this.options.negative)if(n.classList.contains("mc-bar-positive"))n.style.marginLeft=this.dimensions.marginLeft+"%";else if(a<this.dimensions.maxNegative){var c=(this.dimensions.maxNegative-a)*this.dimensions.single;n.style.marginLeft=c+"%"}n.innerHTML="<span>"+n.innerHTML+"</span>",n.style.width=l+"%"}},e.prototype.insert=function(){var t=document.createElement("span"),e="mc-chart-not-accessible-"+this.chartId;t.innerHTML="This content is not accessible - switch to table",t.className="mc-hidden",t.id=e,this.$graphContainer.setAttribute("aria-labelledby",e),this.$graphContainer.appendChild(this.$graph),this.$graphContainer.appendChild(t),this.$table.insertAdjacentElement("afterend",this.$graphContainer)},e.prototype.applyOutdent=function(){for(var t=this.$graph.querySelectorAll(".mc-bar-cell"),e=0;e<t.length;e++){var o=t[e],i=parseFloat(this.utils.stripValue(o.innerText),10),n=o.querySelector("span"),s=o.querySelector("span").offsetWidth+10,r=o.offsetWidth;this.options.stacked?(s>r&&i>0||i<1)&&o.classList.add("mc-value-overflow"):(0===i&&o.classList.add("mc-bar-outdented"),this.options.autoOutdent&&s>=r||this.options.outdentAll?(o.classList.add("mc-bar-outdented"),n.style.marginLeft="100%",n.style.display="inline-block"):o.classList.add("mc-bar-indented"))}},e.prototype.getChartId=function(){for(var t=document.querySelectorAll("table.js-barchart-table"),e=null,o=0;o<t.length;o++)t[o]===this.$table&&(e=o);return e},t.MagnaCharta=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},function(t){"use strict";var e=function(t){this.$element=t};e.prototype.init=function(){for(var e=this.$element.querySelectorAll(".js-barchart-table"),o=[],i=0;i<e.length;i++){var n=e[i].className;-1===n.indexOf("mc-chart")&&-1===n.indexOf("js-barchart-table-init")&&o.push(e[i])}for(var s=0;s<o.length;s++){var r=o[s];new t.Modules.MagnaCharta(r,{toggleText:"Change between chart and table"}).init(),r.className=r.className+" js-barchart-table-init"}},t.GovspeakBarchartEnhancement=e}(window.GOVUK),function(){"use strict";window.GOVUK=window.GOVUK||{};var t=window.GOVUK||{},e=function(t,e){this.$element=t,this.$classOverride=void 0!==e?e:"gem-c-govspeak__youtube-video"};e.prototype.init=function(){if(!this.campaignCookiesAllowed())return this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start),void this.decorateLink();this.startModule()},e.prototype.decorateLink=function(){for(var t=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]'),e=0;e<t.length;++e){var o=t[e],i=o.closest("p"),n=o.getAttribute("href"),s=o.textContent,r=document.createElement("p");r.setAttribute("class","gem-c-govspeak__youtube-placeholder govuk-body");var a=`\n        <span class="govuk-heading-s">How to watch this YouTube video</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">There's a YouTube video on this page. You can't access it because of your cookie settings.</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">You can <a href="/help/cookies" class="govuk-link">change your cookie settings</a> or watch the video on YouTube instead:</span>\n        <a href="${n}" class="govuk-link">${s}</a>\n      `;r.innerHTML=a,i.after(r),i.classList.add("gem-c-govspeak__youtube-placeholder-link")}},e.prototype.startModule=function(){window.removeEventListener("cookie-consent",this.start);for(var t=this.$element.querySelectorAll(".gem-c-govspeak__youtube-placeholder"),o=0;o<t.length;++o)t[o].remove();var i=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]');i.length>0&&e.insertApiScript();for(var n=0;n<i.length;++n){var s=i[n],r=s.getAttribute("href"),a={link:s};if(r.includes("/live_stream")){var l=e.parseLivestream(r);!this.hasDisabledEmbed(s)&&l&&(a.channel=l,this.setupVideo(a))}else{var c=e.parseVideoId(r);!this.hasDisabledEmbed(s)&&c&&(a.videoId=c,this.setupVideo(a))}}},e.prototype.hasDisabledEmbed=function(t){return"off"===t.getAttribute("data-youtube-player")},e.prototype.setupVideo=function(t){var o=e.nextId(),i=t.link,n=t.videoId?t.videoId:t.channel,s=i.parentNode,r=s.parentNode,a=document.createElement("div");a.className+=this.$classOverride,a.innerHTML='<span id="'+o+'" data-video-id="'+n+'"></span>',t.title=i.textContent,r.replaceChild(a,s),this.insertVideo(o,t)},e.prototype.insertVideo=function(t,o){var i="",n="";o.channel?(i=o.channel,n="live_stream"):n=o.videoId;var s=function(){new window.YT.Player(t,{videoId:n,host:"https://www.youtube-nocookie.com",playerVars:{enablejsapi:1,origin:window.location.origin,rel:0,disablekb:1,modestbranding:1,channel:i},events:{onReady:function(t){var e=o.title;t.target.getIframe().title=e+" (video)",window.GOVUK.analyticsGa4.analyticsModules&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.configureVideo(t)},onStateChange:function(t){var e=t.data,o={"-1":"VideoUnstarted",0:"VideoEnded",1:"VideoPlaying",2:"VideoPaused",3:"VideoBuffering",5:"VideoCued"};window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.trackVideo(t,o[e])}}})};s=s.bind(this),e.playerApiReady?s.call():e.queuedInserts.push(s)},e.prototype.campaignCookiesAllowed=function(){var t=window.GOVUK.getConsentCookie();return null!==t&&t.campaigns},e.nextId=function(){return this.embedCount=this.embedCount||0,this.embedCount+=1,"youtube-"+this.embedCount},e.insertApiScript=function(){if(!this.apiScriptInserted){var t=document.createElement("script");t.src="https://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),this.apiScriptInserted=!0}},e.parseLivestream=function(t){var e=t.match(/channel=([^&]*)/);if(e)return e[1]},e.parseVideoId=function(t){var e;try{e=new URL(t)}catch(t){return}return"www.youtube.com"===e.host||"youtube.com"===e.host?e.searchParams.get("v")||void 0:"youtu.be"===e.host?e.pathname.slice(1):void 0},e.apiScriptInserted=!1,e.playerApiReady=!1,e.queuedInserts=[],window.onYouTubePlayerAPIReady=function(){e.playerApiReady=!0;for(var t=0;t<e.queuedInserts.length;t++)e.queuedInserts[t].call()},t.GovspeakYoutubeLinkEnhancement=e}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.focus()},t.InitialFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.toggleTarget=this.$module.querySelector(".js-class-toggle"),this.$module.addFocusClass=this.addFocusClass.bind(this),this.$module.removeFocusClassFromEmptyInput=this.removeFocusClassFromEmptyInput.bind(this),this.inputIsEmpty()||this.addFocusClass(),this.toggleTarget.addEventListener("focus",this.$module.addFocusClass),this.toggleTarget.addEventListener("blur",this.$module.removeFocusClassFromEmptyInput)},e.prototype.inputIsEmpty=function(){return""===this.toggleTarget.value},e.prototype.addFocusClass=function(){this.toggleTarget.classList.add("focus")},e.prototype.removeFocusClassFromEmptyInput=function(){this.inputIsEmpty()&&this.toggleTarget.classList.remove("focus")},t.GemToggleInputClassOnFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.toggleTrigger=this.$module.querySelector("[data-controls][data-expanded]"),this.$module.toggleTrigger&&(this.$module.toggleClass=this.$module.getAttribute("data-toggle-class")||"js-hidden",this.addAriaAttrs(),this.toggleOnClick())},e.prototype.addAriaAttrs=function(){this.$module.toggleTrigger.setAttribute("role","button"),this.$module.toggleTrigger.setAttribute("aria-controls",this.$module.toggleTrigger.getAttribute("data-controls")),this.$module.toggleTrigger.setAttribute("aria-expanded",this.$module.toggleTrigger.getAttribute("data-expanded")),this.$module.targets=this.getTargetElements();for(var t=0;t<this.$module.targets.length;t++)this.$module.targets[t].setAttribute("aria-live","polite"),this.$module.targets[t].setAttribute("role","region")},e.prototype.getTargetElements=function(){var t="#"+this.$module.toggleTrigger.getAttribute("aria-controls").split(" ").join(", #");return this.$module.querySelectorAll(t)},e.prototype.toggleOnClick=function(){var t=this;this.$module.toggleTrigger.addEventListener("click",(function(e){if(e.preventDefault(),"true"===this.getAttribute("aria-expanded")){this.setAttribute("aria-expanded",!1);for(var o=0;o<t.$module.targets.length;o++)t.$module.targets[o].classList.add(t.$module.toggleClass)}else{this.setAttribute("aria-expanded",!0);for(var i=0;i<t.$module.targets.length;i++)t.$module.targets[i].classList.remove(t.$module.toggleClass)}var n=this.getAttribute("data-toggled-text");"string"==typeof n&&(this.setAttribute("data-toggled-text",this.innerText),this.innerText=n)}))},t.GemToggle=e}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.triggerEvent=function(t,e,o){var i,n=o||{},s=n.keyCode;Object.prototype.hasOwnProperty.call(n,"bubbles")||(n.bubbles=!0),Object.prototype.hasOwnProperty.call(n,"cancelable")||(n.cancelable=!0),"function"==typeof window.CustomEvent?i=new window.CustomEvent(e,n):(i=document.createEvent("CustomEvent")).initCustomEvent(e,n.bubbles,n.cancelable,n.detail),s&&(i.keyCode=s),n.shiftKey&&(i.shiftKey=!0),t.dispatchEvent(i)}}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GOVUKFrontend={})}(this,(function(t){"use strict";function e(t,e){return t instanceof HTMLElement&&t.hasAttribute(`data-${e}-init`)}function o(t=document.body){return!!t&&t.classList.contains("govuk-frontend-supported")}function i(t,e){return`${t.moduleName}: ${e}`}class n extends Error{constructor(...t){super(...t),this.name="GOVUKFrontendError"}}class s extends n{constructor(t=document.body){const e="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(t?e:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class r extends n{constructor(t){let e="string"==typeof t?t:"";if("object"==typeof t){const{component:o,identifier:n,element:s,expectedType:r}=t;e=n,e+=s?` is not of type ${null!=r?r:"HTMLElement"}`:" not found",e=i(o,e)}super(e),this.name="ElementError"}}class a extends n{constructor(t){super("string"==typeof t?t:i(t,"Root element (`$root`) already initialised")),this.name="InitError"}}class l{get $root(){return this._$root}constructor(t){this._$root=void 0;const e=this.constructor;if("string"!=typeof e.moduleName)throw new a("`moduleName` not defined in component");if(!(t instanceof e.elementType))throw new r({element:t,component:e,identifier:"Root element (`$root`)",expectedType:e.elementType.name});this._$root=t,e.checkSupport(),this.checkInitialised();const o=e.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const t=this.constructor,o=t.moduleName;if(o&&e(this.$root,o))throw new a(t)}static checkSupport(){if(!o())throw new s}}l.elementType=HTMLElement;class c extends l{constructor(t){super(t),this.$inputs=void 0;const e=this.$root.querySelectorAll('input[type="checkbox"]');if(!e.length)throw new r({component:c,identifier:'Form inputs (`<input type="checkbox">`)'});this.$inputs=e,this.$inputs.forEach((t=>{const e=t.getAttribute("data-aria-controls");if(e){if(!document.getElementById(e))throw new r({component:c,identifier:`Conditional reveal (\`id="${e}"\`)`});t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls")}})),window.addEventListener("pageshow",(()=>this.syncAllConditionalReveals())),this.syncAllConditionalReveals(),this.$root.addEventListener("click",(t=>this.handleClick(t)))}syncAllConditionalReveals(){this.$inputs.forEach((t=>this.syncConditionalRevealWithInputState(t)))}syncConditionalRevealWithInputState(t){const e=t.getAttribute("aria-controls");if(!e)return;const o=document.getElementById(e);if(null!=o&&o.classList.contains("govuk-checkboxes__conditional")){const e=t.checked;t.setAttribute("aria-expanded",e.toString()),o.classList.toggle("govuk-checkboxes__conditional--hidden",!e)}}unCheckAllInputsExcept(t){document.querySelectorAll(`input[type="checkbox"][name="${t.name}"]`).forEach((e=>{t.form===e.form&&e!==t&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}))}unCheckExclusiveInputs(t){document.querySelectorAll(`input[data-behaviour="exclusive"][type="checkbox"][name="${t.name}"]`).forEach((e=>{t.form===e.form&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}))}handleClick(t){const e=t.target;if(!(e instanceof HTMLInputElement)||"checkbox"!==e.type)return;if(e.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(e),!e.checked)return;"exclusive"===e.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(e):this.unCheckExclusiveInputs(e)}}c.moduleName="govuk-checkboxes",t.Checkboxes=c})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukCheckboxes=window.GOVUKFrontend.Checkboxes,function(t){function e(t){this.$module=t,this.$checkboxes=this.$module.querySelectorAll("input[type=checkbox]"),this.$nestedCheckboxes=this.$module.querySelectorAll("[data-nested=true] input[type=checkbox]")}e.prototype.init=function(){this.applyAriaControlsAttributes(this.$module);for(var t=0;t<this.$nestedCheckboxes.length;t++)this.$nestedCheckboxes[t].addEventListener("change",this.handleNestedCheckboxChange.bind(this))},e.prototype.handleNestedCheckboxChange=function(t){var e=t.target,o=e.closest(".govuk-checkboxes--nested"),i=this.$module.querySelector(".govuk-checkboxes--nested[data-parent="+e.id+"]");i?this.toggleNestedCheckboxes(i,e):o&&this.toggleParentCheckbox(o,e)},e.prototype.toggleNestedCheckboxes=function(t,e){var o=t.querySelectorAll("input[type=checkbox]");if(e.checked)for(var i=0;i<o.length;i++)o[i].checked=!0;else for(i=0;i<o.length;i++)o[i].checked=!1},e.prototype.toggleParentCheckbox=function(t,e){var o=t.querySelectorAll("input"),i=t.querySelectorAll("input:checked"),n=t.getAttribute("data-parent"),s=document.getElementById(n);e.checked&&o.length===i.length?s.checked=!0:s.checked=!1},e.prototype.applyAriaControlsAttributes=function(t){for(var e=t.querySelectorAll("[data-controls]"),o=0;o<e.length;o++)e[o].setAttribute("aria-controls",e[o].getAttribute("data-controls"))},t.GemCheckboxes=e}(window.GOVUK.Modules),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GOVUKFrontend={})}(this,(function(t){"use strict";function e(t,e){const o=t?t.trim():"";let i,n=null==e?void 0:e.type;switch(n||(["true","false"].includes(o)&&(n="boolean"),o.length>0&&isFinite(Number(o))&&(n="number")),n){case"boolean":i="true"===o;break;case"number":i=Number(o);break;default:i=t}return i}function o(...t){const e={};for(const i of t)for(const t of Object.keys(i)){const n=e[t],s=i[t];c(n)&&c(s)?e[t]=o(n,s):e[t]=s}return e}function i(t,o,i){const n=t.schema.properties[i];if("object"!==(null==n?void 0:n.type))return;const s={[i]:{}};for(const[t,n]of Object.entries(o)){let o=s;const r=t.split(".");for(const[s,a]of r.entries())"object"==typeof o&&(s<r.length-1?(c(o[a])||(o[a]={}),o=o[a]):t!==i&&(o[a]=e(n)))}return s[i]}function n(t){if(t.includes("#"))return t.split("#").pop()}function s(t,e={}){function o(){t.addEventListener("blur",i,{once:!0})}function i(){var o;null==(o=e.onBlur)||o.call(t),s||t.removeAttribute("tabindex")}var n;const s=t.getAttribute("tabindex");s||t.setAttribute("tabindex","-1"),t.addEventListener("focus",o,{once:!0}),null==(n=e.onBeforeFocus)||n.call(t),t.focus()}function r(t,e){return t instanceof HTMLElement&&t.hasAttribute(`data-${e}-init`)}function a(t=document.body){return!!t&&t.classList.contains("govuk-frontend-supported")}function l(t){return Array.isArray(t)}function c(t){return!!t&&"object"==typeof t&&!l(t)}function u(t,e){return`${t.moduleName}: ${e}`}function d(t,o){const n={};for(const[s,r]of Object.entries(t.schema.properties))s in o&&(n[s]=e(o[s],r)),"object"===(null==r?void 0:r.type)&&(n[s]=i(t,o,s));return n}class h extends Error{constructor(...t){super(...t),this.name="GOVUKFrontendError"}}class p extends h{constructor(t=document.body){const e="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(t?e:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class g extends h{constructor(t){let e="string"==typeof t?t:"";if("object"==typeof t){const{component:o,identifier:i,element:n,expectedType:s}=t;e=i,e+=n?` is not of type ${null!=s?s:"HTMLElement"}`:" not found",e=u(o,e)}super(e),this.name="ElementError"}}class m extends h{constructor(t){super("string"==typeof t?t:u(t,"Root element (`$root`) already initialised")),this.name="InitError"}}class f{get $root(){return this._$root}constructor(t){this._$root=void 0;const e=this.constructor;if("string"!=typeof e.moduleName)throw new m("`moduleName` not defined in component");if(!(t instanceof e.elementType))throw new g({element:t,component:e,identifier:"Root element (`$root`)",expectedType:e.elementType.name});this._$root=t,e.checkSupport(),this.checkInitialised();const o=e.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const t=this.constructor,e=t.moduleName;if(e&&r(this.$root,e))throw new m(t)}static checkSupport(){if(!a())throw new p}}f.elementType=HTMLElement;class y extends f{constructor(t,e={}){super(t),this.config=void 0,this.config=o(y.defaults,e,d(y,this.$root.dataset)),this.config.disableAutoFocus||s(this.$root),this.$root.addEventListener("click",(t=>this.handleClick(t)))}handleClick(t){const e=t.target;e&&this.focusTarget(e)&&t.preventDefault()}focusTarget(t){if(!(t instanceof HTMLAnchorElement))return!1;const e=n(t.href);if(!e)return!1;const o=document.getElementById(e);if(!o)return!1;const i=this.getAssociatedLegendOrLabel(o);return!!i&&(i.scrollIntoView(),o.focus({preventScroll:!0}),!0)}getAssociatedLegendOrLabel(t){var e;const o=t.closest("fieldset");if(o){const e=o.getElementsByTagName("legend");if(e.length){const o=e[0];if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))return o;const i=o.getBoundingClientRect().top,n=t.getBoundingClientRect();if(n.height&&window.innerHeight){if(n.top+n.height-i<window.innerHeight/2)return o}}}return null!=(e=document.querySelector(`label[for='${t.getAttribute("id")}']`))?e:t.closest("label")}}y.moduleName="govuk-error-summary",y.defaults=Object.freeze({disableAutoFocus:!1}),y.schema=Object.freeze({properties:{disableAutoFocus:{type:"boolean"}}}),t.ErrorSummary=y})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukErrorSummary=window.GOVUKFrontend.ErrorSummary,window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){-1===this.$module.className.indexOf("js-disable-youtube")&&this.embedYoutube(),this.createBarcharts()},e.prototype.embedYoutube=function(){new window.GOVUK.GovspeakYoutubeLinkEnhancement(this.$module).init()},e.prototype.createBarcharts=function(){new window.GOVUK.GovspeakBarchartEnhancement(this.$module).init()},t.Govspeak=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.$closeLink=this.$module.querySelector(".js-dismiss-link"),this.$campaignName=this.$module.getAttribute("data-intervention-name"),this.$campaignCookie=window.GOVUK.cookie("intervention_campaign")||""}e.prototype.init=function(){this.$cookieHasCampaign=this.cookieHasCampaign(),this.$closeLink&&(this.$module.close=this.handleClose.bind(this),this.$closeLink.addEventListener("click",this.$module.close)),this.$cookieHasCampaign&&this.hideBanner()},e.prototype.handleClose=function(t){t.preventDefault(),this.$cookieHasCampaign&&this.setCookies(),this.hideBanner()},e.prototype.cookieHasCampaign=function(){return!!this.$campaignCookie&&this.cookieValues().includes(this.$campaignName)},e.prototype.cookieValues=function(){if(null!==this.$campaignCookie&&this.$campaignCookie.length>0)return this.$campaignCookie.split(",")},e.prototype.appendCookieValues=function(){return this.$campaignCookie+","+this.$campaignName},e.prototype.setCookies=function(){
this.$campaignCookie?window.GOVUK.setCookie("intervention_campaign",this.appendCookieValues(),{days:30}):window.GOVUK.setCookie("intervention_campaign",this.$campaignName,{days:30})},e.prototype.hideBanner=function(){this.$cookieHasCampaign||this.setCookies(),this.$module.hidden=!0,this.$module.style.display="none"},t.Intervention=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){var t=this.$module.querySelector(".js-see-all-updates-link");if(t){var e=document.querySelector(t.getAttribute("href"));e&&t.addEventListener("click",(function(){var t=e.querySelector("[aria-expanded]");t&&"true"!==t.getAttribute("aria-expanded")&&t.click()}))}},t.Metadata=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$optionSelect=t,this.$options=this.$optionSelect.querySelectorAll("input[type='checkbox']"),this.$optionsContainer=this.$optionSelect.querySelector(".js-options-container"),this.$optionList=this.$optionsContainer.querySelector(".js-auto-height-inner"),this.$allCheckboxes=this.$optionsContainer.querySelectorAll(".govuk-checkboxes__item"),this.hasFilter=this.$optionSelect.getAttribute("data-filter-element")||"",this.checkedCheckboxes=[],this.mq=window.matchMedia("(min-width: 641px)"),this.isClosedOnLoad=this.$optionSelect.getAttribute("data-closed-on-load"),this.isClosedOnLoadMobile=this.$optionSelect.getAttribute("data-closed-on-load-mobile")}e.prototype.init=function(){if(this.hasFilter.length){var t=document.createElement("div");t.innerHTML=this.hasFilter;var e=document.createElement("div");e.classList.add("gem-c-option-select__filter"),e.innerHTML=t.childNodes[0].nodeValue,this.$optionsContainer.parentNode.insertBefore(e,this.$optionsContainer),this.$filter=this.$optionSelect.querySelector('input[name="option-select-filter"]'),this.$filterCount=document.getElementById(this.$filter.getAttribute("aria-describedby")),this.filterTextSingle=" "+this.$filterCount.getAttribute("data-single"),this.filterTextMultiple=" "+this.$filterCount.getAttribute("data-multiple"),this.filterTextSelected=" "+this.$filterCount.getAttribute("data-selected"),this.checkboxLabels=[],this.filterTimeout=0,this.getAllCheckedCheckboxes();for(var o=0;o<this.$allCheckboxes.length;o++)this.checkboxLabels.push(this.cleanString(this.$allCheckboxes[o].textContent));this.$filter.addEventListener("keyup",this.typeFilterText.bind(this))}this.$optionsContainer.querySelector(".govuk-checkboxes").addEventListener("change",this.updateCheckedCount.bind(this)),this.replaceHeadingSpanWithButton(),this.$optionSelect.classList.add("js-collapsible"),this.$optionSelect.querySelector(".js-container-button").addEventListener("click",this.toggleOptionSelect.bind(this)),this.mq.matches?this.toggleVisibility(!0):this.toggleVisibility(!1);var i=this.checkedString();i&&this.attachCheckedCounter(i)},e.prototype.toggleVisibility=function(t){t?"true"===this.isClosedOnLoad?this.close():this.setupHeight():"true"===this.isClosedOnLoadMobile||"true"===this.isClosedOnLoad?this.close():this.setContainerHeight(201)},e.prototype.typeFilterText=function(t){t.stopPropagation();var e=13;t.keyCode!==e?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(){this.doFilter(this)}.bind(this),300)):t.preventDefault()},e.prototype.cleanString=function(t){return(t=(t=(t=t.replace(/&/g,"and")).replace(/[\u2019',:\u2013-]/g,"")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).trim().replace(/\s\s+/g," ").toLowerCase()},e.prototype.getAllCheckedCheckboxes=function(){this.checkedCheckboxes=[];for(var t=0;t<this.$options.length;t++)this.$options[t].checked&&this.checkedCheckboxes.push(t)},e.prototype.doFilter=function(t){var e=t.cleanString(t.$filter.value),o=t.checkedCheckboxes.slice(),i=0;for(i=0;i<t.$allCheckboxes.length;i++)-1===o.indexOf(i)&&-1!==t.checkboxLabels[i].search(e)&&o.push(i);for(i=0;i<t.$allCheckboxes.length;i++)t.$allCheckboxes[i].style.display="none";for(i=0;i<o.length;i++)t.$allCheckboxes[o[i]].style.display="flex";var n=t.$optionsContainer.querySelectorAll(".govuk-checkboxes__input:checked").length,s=o.length+n,r=s+(1===s?t.filterTextSingle:t.filterTextMultiple)+", "+n+t.filterTextSelected;t.$filterCount.innerHTML=r},e.prototype.replaceHeadingSpanWithButton=function(){var t=this.$optionSelect.querySelector(".js-container-button"),e=t.innerHTML,o=document.createElement("button");o.setAttribute("class","js-container-button gem-c-option-select__title gem-c-option-select__button"),o.setAttribute("type","button"),o.setAttribute("aria-expanded",!0),o.setAttribute("id",t.getAttribute("id")),o.setAttribute("aria-controls",this.$optionsContainer.getAttribute("id"));var i=this.$optionSelect.getAttribute("data-button-data-attributes");if(i)try{for(var n in i=JSON.parse(i)){var s=n.replace(/_/g,"-").toLowerCase(),r=i[n],a="object"==typeof r?JSON.stringify(r):r;o.setAttribute("data-"+s,a)}}catch(t){console.error("Error with option select button data attributes, invalid JSON passed"+t.message,window.location)}o.innerHTML=e,t.parentNode.replaceChild(o,t)},e.prototype.attachCheckedCounter=function(t){var e=document.createElement("div");e.setAttribute("class","gem-c-option-select__selected-counter js-selected-counter"),e.innerHTML=t,this.$optionSelect.querySelector(".js-container-toggle").insertAdjacentElement("afterend",e)},e.prototype.updateCheckedCount=function(){var t=this.checkedString(),e=this.$optionSelect.querySelector(".js-selected-counter");t?null===e?this.attachCheckedCounter(t):e.textContent=t:e&&e.parentNode.removeChild(e)},e.prototype.checkedString=function(){this.getAllCheckedCheckboxes();var t=this.checkedCheckboxes.length,e=!1;return t>0&&(e=t+" selected"),e},e.prototype.toggleOptionSelect=function(t){this.isClosed()?this.open():this.close(),t.preventDefault()},e.prototype.open=function(){this.isClosed()&&(this.$optionSelect.querySelector(".js-container-button").setAttribute("aria-expanded",!0),this.$optionSelect.classList.remove("js-closed"),this.$optionSelect.classList.add("js-opened"),this.$optionsContainer.style.height||this.setupHeight())},e.prototype.close=function(){this.$optionSelect.classList.remove("js-opened"),this.$optionSelect.classList.add("js-closed"),this.$optionSelect.querySelector(".js-container-button").setAttribute("aria-expanded",!1)},e.prototype.isClosed=function(){return this.$optionSelect.classList.contains("js-closed")},e.prototype.setContainerHeight=function(t){this.$optionsContainer.style.height=t+"px"},e.prototype.isCheckboxVisible=function(t){var e=this.$optionsContainer.clientHeight,o=this.$optionList.getBoundingClientRect().top;return t.getBoundingClientRect().top-o<e},e.prototype.getVisibleCheckboxes=function(){for(var t=[],e=0;e<this.$options.length;e++)this.isCheckboxVisible(this.$options[e])&&t.push(this.$options[e]);return this.$options[t.length]&&t.push(this.$options[t.length]),t},e.prototype.isComponentParentHidden=function(){var t=this.$optionSelect.parentElement,e=!1;return t&&(e=!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),e},e.prototype.setupHeight=function(){var t=this.$optionsContainer.clientHeight,e=this.$optionList.offsetHeight;if(this.isComponentParentHidden()&&(t=200,e=200),e<t+50)this.setContainerHeight(e+1);else{var o=this.getVisibleCheckboxes(),i=o[o.length-1],n=i.parentNode.offsetTop;this.setContainerHeight(n+i.clientHeight/1.5)}},t.OptionSelect=e}(window.GOVUK.Modules),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GOVUKFrontend={})}(this,(function(t){"use strict";function e(t,e){return t instanceof HTMLElement&&t.hasAttribute(`data-${e}-init`)}function o(t=document.body){return!!t&&t.classList.contains("govuk-frontend-supported")}function i(t,e){return`${t.moduleName}: ${e}`}class n extends Error{constructor(...t){super(...t),this.name="GOVUKFrontendError"}}class s extends n{constructor(t=document.body){const e="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(t?e:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class r extends n{constructor(t){let e="string"==typeof t?t:"";if("object"==typeof t){const{component:o,identifier:n,element:s,expectedType:r}=t;e=n,e+=s?` is not of type ${null!=r?r:"HTMLElement"}`:" not found",e=i(o,e)}super(e),this.name="ElementError"}}class a extends n{constructor(t){super("string"==typeof t?t:i(t,"Root element (`$root`) already initialised")),this.name="InitError"}}class l{get $root(){return this._$root}constructor(t){this._$root=void 0;const e=this.constructor;if("string"!=typeof e.moduleName)throw new a("`moduleName` not defined in component");if(!(t instanceof e.elementType))throw new r({element:t,component:e,identifier:"Root element (`$root`)",expectedType:e.elementType.name});this._$root=t,e.checkSupport(),this.checkInitialised();const o=e.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const t=this.constructor,o=t.moduleName;if(o&&e(this.$root,o))throw new a(t)}static checkSupport(){if(!o())throw new s}}l.elementType=HTMLElement;class c extends l{constructor(t){super(t),this.$inputs=void 0;const e=this.$root.querySelectorAll('input[type="radio"]');if(!e.length)throw new r({component:c,identifier:'Form inputs (`<input type="radio">`)'});this.$inputs=e,this.$inputs.forEach((t=>{const e=t.getAttribute("data-aria-controls");if(e){if(!document.getElementById(e))throw new r({component:c,identifier:`Conditional reveal (\`id="${e}"\`)`});t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls")}})),window.addEventListener("pageshow",(()=>this.syncAllConditionalReveals())),this.syncAllConditionalReveals(),this.$root.addEventListener("click",(t=>this.handleClick(t)))}syncAllConditionalReveals(){this.$inputs.forEach((t=>this.syncConditionalRevealWithInputState(t)))}syncConditionalRevealWithInputState(t){const e=t.getAttribute("aria-controls");if(!e)return;const o=document.getElementById(e);if(null!=o&&o.classList.contains("govuk-radios__conditional")){const e=t.checked;t.setAttribute("aria-expanded",e.toString()),o.classList.toggle("govuk-radios__conditional--hidden",!e)}}handleClick(t){const e=t.target;if(!(e instanceof HTMLInputElement)||"radio"!==e.type)return;const o=document.querySelectorAll('input[type="radio"][aria-controls]'),i=e.form,n=e.name;o.forEach((t=>{const e=t.form===i;t.name===n&&e&&this.syncConditionalRevealWithInputState(t)}))}}c.moduleName="govuk-radios",t.Radios=c})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukRadios=window.GOVUKFrontend.Radios,void 0===window.GOVUK&&(window.GOVUK={}),void 0===window.GOVUK.support&&(window.GOVUK.support={}),window.GOVUK.support.history=function(){return window.history&&window.history.pushState&&window.history.replaceState},function(t){"use strict";const e=t.GOVUK||{};e.analyticsGa4=e.analyticsGa4||{},e.analyticsGa4.Ga4FinderTracker={trackChangeEvent:function(t,e){e=e.split(" ");const o=t.closest("[data-ga4-filter-parent]"),i=t.closest("[data-ga4-section]"),n=e[0],s=e[1];if(!(n&&s||"clear-all-filters"===n))return void console.warn("GA4 Finder tracker incorrectly configured for element: "+t);let r={type:"finder",event_name:"select_content"};const a=this.getElementInfo(t,s,i);if(!a)return;const l=a.elementValue;r.text=l;const c=a.wasFilterRemoved;r=this.setSchemaBasedOnChangeType(r,l,s,c,n,i,o);const u=(new window.GOVUK.analyticsGa4.Schemas).mergeProperties(r,"event_data");window.GOVUK.analyticsGa4.core.sendData(u)},getElementInfo:function(t,e,o){let i,n="",s=!1;switch(e){case"checkbox":{const e=t.id;n=document.querySelector("label[for='"+e+"']").textContent,s=!t.checked;break}case"radio":{const e=t.id;n=document.querySelector("label[for='"+e+"']").textContent,i=o.querySelector("input[type=radio]:first-of-type"),t.id===i.id&&(s=!0);break}case"select":n=t.querySelector("option[value='"+t.value+"']").textContent,i=t.querySelector("option:first-of-type").textContent,n===i&&(s=!0);break;case"text":n=t.value,""===n&&(s=!0);break;case"date":{const e=[...t.closest(".govuk-date-input").querySelectorAll("input")],o=e.every((t=>t.value)),i=e.every((t=>!t.value));if(o)n=e.map((t=>t.value)).join("/");else{if(!i)return null;s=!0}break}}return{elementValue:n,wasFilterRemoved:s}},setSchemaBasedOnChangeType:function(t,o,i,n,s,r,a){switch(s){case"update-filter":{r&&(t.section=r.getAttribute("data-ga4-section"));const e=this.getSectionIndex(a);n?(t.action="remove",t.text="text"===i?void 0:o):t.action="text"===i?"search":"select",t.index_link=e.index_link||void 0,t.index_section=e.index_section||void 0,t.index_section_count=e.index_section_count||void 0;break}case"update-keyword":t.event_name="search",t.url=window.location.pathname,t.section="Search",t.action="search",t.text=e.analyticsGa4.core.trackFunctions.standardiseSearchTerm(t.text);break;case"clear-all-filters":t.action="remove",t.text="Clear all filters";break;case"update-sort":t.action="sort",t.section="Sort by"}return t},getSectionIndex:function(t){try{let e=t.getAttribute("data-ga4-index");return e=JSON.parse(e),e}catch(t){console.error("GA4 configuration error: "+t.message,window.location)}}},t.GOVUK=e}(window),function(){"use strict";function t(t){if(this.state=!1,this.previousState=!1,this.resultCache={},this.$form=t.$form,this.$searchSubmitButton=this.$form.querySelector(".gem-c-search__submit"),this.$resultsWrapper=this.$form.querySelector(".js-live-search-results-block"),this.$suggestionsBlock=this.$form.querySelector("#js-spelling-suggestions"),this.$resultsBlock=t.$results.querySelector("#js-results"),this.$countBlock=t.$results.querySelector("#js-result-count"),this.$mobileResultsCount=this.$form.querySelector(".js-result-count"),this.$selectedFilterCount=this.$form.querySelector(".js-selected-filter-count"),this.$facetTagBlock=t.$results.querySelector("#js-facet-tag-wrapper"),this.$mobileFacetTagBlock=this.$form.querySelector(".js-mobile-facet-tag-block"),this.$loadingBlock=t.$results.querySelector("#js-loading-message"),this.$sortBlock=t.$results.querySelector("#js-sort-options"),this.$paginationBlock=t.$results.querySelector("#js-pagination"),this.action=this.$form.getAttribute("action")+".json",t.$atomAutodiscoveryLink&&(this.$atomAutodiscoveryLink=t.$atomAutodiscoveryLink),this.baseTitle=document.querySelector("meta[name='govuk:base_title']"),this.baseTitle?this.baseTitle=this.baseTitle.getAttribute("content"):this.baseTitle=document.title,this.$resultsCountMetaTag=document.querySelector("meta[name='govuk:search-result-count']"),this.$resultsTokenMetaTag=document.querySelector("meta[name='govuk:discovery-engine-attribution-token']"),this.$emailLinks=document.querySelectorAll('[href*="email-signup"]'),this.previousSearchTerm="",this.$emailLinks[0]&&(this.emailSignupHref=this.$emailLinks[0].getAttribute("href")),this.$atomLinks=document.querySelectorAll('[href*=".atom"]'),this.$atomLinks[0]&&(this.atomHref=this.$atomLinks[0].getAttribute("href")),this.bindSortElements(),this.getAndUpdateTaxonomyFacet(),"complete"===document.readyState?this.Ga4EcommerceTracking():window.addEventListener("DOMContentLoaded",function(){this.Ga4EcommerceTracking()}.bind(this)),this.focusErrorMessagesOnLoad(this.$form),this.$searchSubmitButton&&this.$searchSubmitButton.addEventListener("click",function(t){t.preventDefault(),this.formChange(t)}.bind(this)),e.support.history()){this.saveState(),this.$form.addEventListener("change",function(t){this.formChange(t)}.bind(this)),this.$form.addEventListener("customFormChange",function(t){this.formChange(t)}.bind(this)),this.handleKeyPress=function(t){var e=13;t.keyCode!==e&&"change"!==t.type||(this.formChange(t),this.previousSearchTerm=t.currentTarget.value,t.preventDefault())};for(var o=this.$form.querySelectorAll("input[type=text],input[type=search]"),i=0;i<o.length;i++)o[i].addEventListener("change",this.handleKeyPress.bind(this)),o[i].addEventListener("keypress",this.handleKeyPress.bind(this));document.addEventListener("popstate",this.popState.bind(this))}else{this.$form.querySelector(".js-live-search-fallback").style.display="block"}}window.GOVUK=window.GOVUK||{};var e=window.GOVUK;t.prototype.restartGa4EcommerceTracking=function(){"complete"===document.readyState?this.Ga4EcommerceTracking(this.previousSearchUrl):window.addEventListener("DOMContentLoaded",function(){this.Ga4EcommerceTracking(this.previousSearchUrl)}.bind(this))},t.prototype.reinitialiseGa4Tracking=function(){e.modules.start(this.$resultsWrapper),this.restartGa4EcommerceTracking()},t.prototype.Ga4EcommerceTracking=function(t){if(e.analyticsGa4&&e.analyticsGa4.Ga4EcommerceTracker){var o=e.getConsentCookie();if(o&&o.usage){if(this.$resultsWrapper){this.$resultsWrapper.setAttribute("data-ga4-search-query",this.currentKeywords());var i=this.$resultsWrapper.querySelector(".js-order-results");i&&i.options.length>0&&this.$resultsWrapper.setAttribute("data-ga4-ecommerce-variant",i.options[i.selectedIndex].text)}e.analyticsGa4.Ga4EcommerceTracker.init(t)}else window.addEventListener("cookie-consent",(function(){e.analyticsGa4.Ga4EcommerceTracker.init(t)}))}},t.prototype.getAndUpdateTaxonomyFacet=function(){var t=document.querySelector(".js-taxonomy-select");t&&(this.taxonomy=this.taxonomy||new e.TaxonomySelect({$el:t}),this.taxonomy.update())},t.prototype.getSerializeForm=function(){for(var t=this.$form.elements,e=[],o=0;o<t.length;o++){var i=t[o];if(i.type&&"checkbox"!==i.type&&"radio"!==i.type||i.checked){var n=i.getAttribute("name"),s=i.value;n&&s&&"option-select-filter"!==n&&e.push({name:n,value:s})}}return e},t.prototype.saveState=function(t){void 0===t&&(t=this.getSerializeForm()),this.previousState=this.state,this.state=t},t.prototype.popState=function(t){t.originalEvent.state&&(this.saveState(t.originalEvent.state),this.updateOrder(),this.updateResults(),this.restoreBooleans(),this.restoreTextInputs())},t.prototype.formChange=function(t){this.isNewState()&&(this.getAndUpdateTaxonomyFacet(),this.saveState(),this.updateOrder(),this.updateLinks(),this.updateTitle(),this.updateResults(t))},t.prototype.serializeState=function(t){var e,o=[];if(Array.isArray(t))for(var i=0;i<t.length;i++)"keywords"===t[i].name?(e=t[i].value.replace(/\s+/g,"+"),o.push(t[i].name+"="+e)):o.push(t[i].name+"="+t[i].value);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&("keywords"===n?(e=t[n].replace(/\s+/g,"+"),o.push(encodeURIComponent(n)+"="+encodeURIComponent(e))):o.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n])));return o.join("&")},t.prototype.updateSpellingSuggestionMetaTag=function(){var t=document.querySelector("meta[name='govuk:spelling-suggestion']");if(this.$suggestionsBlock&&t){var e=this.$suggestionsBlock.querySelector("a"),o="";e&&(o=e.textContent),t.setAttribute("content",o)}},t.prototype.cache=function(t,e){if(void 0===e)return this.resultCache[t];this.resultCache[t]=e},t.prototype.isNewState=function(){return this.serializeState(this.state)!==this.serializeState(this.getSerializeForm())},t.prototype.updateTitle=function(){var t=this.currentKeywords(),e=""!==t;document.title=e?t+" - "+this.baseTitle:this.baseTitle},t.prototype.updateMeta=function(t,e){t&&t.setAttribute("content",e)},t.prototype.updateSortOptions=function(t,e){if(e===this.serializeState(this.state)){var o,i=this.$sortBlock.querySelector("select");t.sort_options_markup&&(o=this.removeSelectElement(t.sort_options_markup)),this.updateElement(i,o),this.bindSortElements()}},t.prototype.removeSelectElement=function(t){var e=/<\/?select\b[^>]*>/g;return t.replace(e,"")},t.prototype.bindSortElements=function(){this.$orderSelect=this.$form.querySelector(".js-order-results"),this.$orderSelect&&(this.$relevanceOrderOption=this.$orderSelect.querySelector("option[value="+this.$orderSelect.getAttribute("data-relevance-sort-option")+"]"))},t.prototype.currentKeywords=function(){return this.getTextInputValue("keywords",this.state)},t.prototype.updateOrder=function(){if(this.$orderSelect){var t=""!==this.currentKeywords(),e=""!==this.getTextInputValue("keywords",this.previousState),o=!t&&e;t&&!e&&this.selectRelevanceSortOption(),o&&this.selectDefaultSortOption()}},t.prototype.selectDefaultSortOption=function(){var t=this.$orderSelect.getAttribute("data-default-sort-option");this.$orderSelect.value=t,this.state=this.getSerializeForm()},t.prototype.selectRelevanceSortOption=function(){var t=this.$orderSelect.getAttribute("data-relevance-sort-option");t&&(this.$relevanceOrderOption.removeAttribute("disabled"),this.$orderSelect.value=t,this.state=this.getSerializeForm())},t.prototype.updateResults=function(t){var e=this.serializeState(this.state),o=this.cache(e),i=this;if(this.previousSearchUrl=window.location.href,void 0===o){this.showLoadingIndicator();var n=new XMLHttpRequest,s=this.action+"?"+encodeURI(e),r=function(o){if(4===n.readyState&&200===n.status){var s=JSON.parse(o.target.response);i.updateUrl(),i.cache(i.serializeState(i.state),s),i.ga4TrackFormChange(t),i.displayResults(s,e),i.reinitialiseGa4Tracking()}else i.showErrorIndicator()};n.open("GET",s,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.addEventListener("load",r),n.send()}else this.updateUrl(),this.ga4TrackFormChange(t),this.displayResults(o,e),this.reinitialiseGa4Tracking()},t.prototype.updateUrl=function(){var t=encodeURI(window.location.pathname+"?"+this.serializeState(this.state));window.history.pushState(this.state,"",t)},t.prototype.updateLinks=function(){var t="?"+this.serializeState(this.state);if(void 0!==this.emailSignupHref&&null!=this.emailSignupHref)for(var e=0;e<this.$emailLinks.length;e++)this.$emailLinks[e].setAttribute("href",encodeURI(this.emailSignupHref.split("?")[0]+t));if(void 0!==this.atomHref&&null!=this.atomHref){for(var o=0;o<this.$atomLinks.length;o++)this.$atomLinks[o].setAttribute("href",encodeURI(this.atomHref.split("?")[0]+t));this.$atomAutodiscoveryLink&&this.$atomAutodiscoveryLink.setAttribute("href",encodeURI(this.atomHref.split("?")[0]+t))}},t.prototype.showLoadingIndicator=function(){this.$loadingBlock.textContent="Loading...",this.$loadingBlock.style.display="block"},t.prototype.showErrorIndicator=function(){this.$loadingBlock.textContent="Error. Please try modifying your search and trying again."},t.prototype.updateElement=function(t,e){t&&(t.innerHTML=e)},t.prototype.displayResults=function(t,e){e===this.serializeState(this.state)&&(this.updateElement(this.$resultsBlock,t.search_results),this.updateElement(this.$facetTagBlock,t.facet_tags),this.updateElement(this.$countBlock,t.display_total),this.updateElement(this.$mobileResultsCount,t.display_total),this.updateElement(this.$mobileFacetTagBlock,t.facet_tags),this.updateElement(this.$selectedFilterCount,t.display_selected_facets_count),this.updateElement(this.$paginationBlock,t.next_and_prev_links),this.updateElement(this.$suggestionsBlock,t.suggestions),this.updateSpellingSuggestionMetaTag(),this.updateSortOptions(t,e),this.updateMeta(this.$resultsCountMetaTag,t.total),this.updateMeta(this.$resultsTokenMetaTag,t.discovery_engine_attribution_token),this.manipulateErrorMessages(t.errors),this.$atomAutodiscoveryLink&&this.$atomAutodiscoveryLink.setAttribute("href",t.atom_url),this.$loadingBlock.textContent="",this.$loadingBlock.style.display="none")},t.prototype.restoreBooleans=function(){for(var t=this.$form.querySelectorAll("input[type=checkbox], input[type=radio]"),e=0;e<t.length;e++){var o=t[e];o.setAttribute("checked",this.isBooleanSelected(o.getAttribute("name"),o.value))}},t.prototype.isBooleanSelected=function(t,e){var o,i;for(o=0,i=this.state.length;o<i;o++)if(this.state[o].name===t&&this.state[o].value===e)return!0;return!1},t.prototype.restoreTextInputs=function(){for(var t=this.$form.querySelectorAll("input[type=text], input[type=search], select"),e=0;e<t.length;e++){var o=t[e];o.value=this.getTextInputValue(o.getAttribute("name"),this.state)}},t.prototype.getTextInputValue=function(t,e){var o,i;for(o=0,i=e.length;o<i;o++)if(e[o].name===t)return e[o].value;return""},t.prototype.focusErrorMessagesOnLoad=function(t){var e=t.querySelector(".govuk-input--error");e&&e.focus()},t.prototype.manipulateErrorMessages=function(t){if(t)for(var e in t){var o=e;for(var i in t[e]){t[e][i]?this.renderErrorMessage(o,i):this.removeErrorMessage(o,i)}}},t.prototype.renderErrorMessage=function(t,e){var o=this.$form.querySelector('input[name*="'+t+"["+e+']"]'),i=document.createElement("span");if(i.setAttribute("id","error-"+t),i.setAttribute("class","gem-c-error-message govuk-error-message"),i.innerHTML='<span class="govuk-visually-hidden">Error:</span> Enter a date',0===o.parentNode.querySelectorAll(".gem-c-error-message").length){o.classList.add("govuk-input--error"),o.insertAdjacentElement("beforebegin",i);var n=o.parentNode;n.classList.contains("govuk-form-group")&&n.classList.add("govuk-form-group--error"),o.setAttribute("aria-describedby",o.getAttribute("aria-describedby")+" "+i.getAttribute("id"))}o.focus()},t.prototype.removeErrorMessage=function(t,e){var o=this.$form.querySelector('input[name*="'+t+"["+e+']"]');if(o){var i=o.parentNode.querySelectorAll(".gem-c-error-message");if(i.length>0){o.classList.remove("govuk-input--error");for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n]);var s=o.parentNode;s.classList.contains("govuk-form-group")&&s.classList.remove("govuk-form-group--error"),o.setAttribute("aria-describedby","")}}},t.prototype.ga4TrackFormChange=function(t){if(t){var o=t.target.closest("[data-ga4-change-category]");if(o&&(o=o.getAttribute("data-ga4-change-category"),e.analyticsGa4&&e.analyticsGa4.Ga4FinderTracker)){var i=e.getConsentCookie();i&&i.usage&&e.analyticsGa4.Ga4FinderTracker.trackChangeEvent(t.target,o)}}},e.LiveSearch=t}(),window.GOVUK=window.GOVUK||{},function(t){"use strict";function e(t){this.$el=t.$el,this.options=this.instantiateOptions()}e.prototype.update=function(){this.disableSubTaxonFacet(),this.resetSubTaxonValue(),this.showRelevantSubTaxons()},e.prototype.$topLevelTaxon=function(){return this.$el.querySelector("#level_one_taxon")},e.prototype.$subTaxon=function(){return this.$el.querySelector("#level_two_taxon")},e.prototype.disableSubTaxonFacet=function(){!!this.$topLevelTaxon().value?this.$subTaxon().removeAttribute("disabled"):this.$subTaxon().setAttribute("disabled",!0)},e.prototype.showRelevantSubTaxons=function(){for(var t=this.options[this.$topLevelTaxon().value],e=this.$subTaxon(),o=e.querySelectorAll("option"),i=0;i<o.length;i++)o[i].value&&o[i].parentNode.removeChild(o[i]);if(t)for(var n=0;n<t.length;n++)e.appendChild(t[n])},e.prototype.instantiateOptions=function(){for(var t={},e=this.$subTaxon().querySelectorAll("option"),o=0;o<e.length;o++){var i=e[o].getAttribute("data-topic-parent");t[i]=t[i]||[],t[i].push(e[o])}return t},e.prototype.resetSubTaxonValue=function(){var t=this.$subTaxon().options[this.$subTaxon().selectedIndex],e=this.$topLevelTaxon().value;t&&t.getAttribute("data-topic-parent")!==e&&(this.$subTaxon().value="")},t.TaxonomySelect=e}(window.GOVUK),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";class e{constructor(t){this.$module=t,this.$form=t.querySelector(".js-all-content-finder-form"),this.$keywordInput=this.$form.querySelector('input[type="search"]'),this.$taxonomySelect=t.querySelector(".js-all-content-finder-taxonomy-select"),this.initialKeywords=this.$keywordInput.value,this.defaultSortOrders=["relevance","most-viewed"]}init(){this.setupTaxonomySelect(),this.setupFormDataCleaner(),this.userHasConsentedToAnalytics()?this.setupAnalyticsTracking():window.addEventListener("cookie-consent",(()=>this.setupAnalyticsTracking()))}userHasConsentedToAnalytics(){return GOVUK.getConsentCookie()&&GOVUK.getConsentCookie().usage}setupTaxonomySelect(){const t=new GOVUK.TaxonomySelect({$el:this.$taxonomySelect});t.update(),this.$taxonomySelect.addEventListener("change",(()=>t.update()))}setupFormDataCleaner(){this.$form.addEventListener("formdata",(t=>{[...t.formData].filter((([t,e])=>""===e||null===e||"order"===t&&this.defaultSortOrders.includes(e))).map((([t])=>t)).forEach((e=>t.formData.delete(e)))}))}setupAnalyticsTracking(){GOVUK.analyticsGa4.Ga4EcommerceTracker.init(),this.$form.addEventListener("change",(t=>{const e=t.target.closest("[data-ga4-change-category]");if(e){const o=e.getAttribute("data-ga4-change-category");GOVUK.analyticsGa4.Ga4FinderTracker.trackChangeEvent(t.target,o)}}))}}t.AllContentFinder=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.module=t,this.triggerElement=document.querySelector('[data-toggle="mobile-filters-modal"][data-target="'+this.module.id+'"]'),this.clearFiltersTrigger=this.module.querySelector(".js-clear-selected-filters"),this.module.toggle=this.handleToggle.bind(this),this.module.open=this.handleOpen.bind(this),this.module.close=this.handleClose.bind(this),this.module.clearFilters=this.handleClearFilters.bind(this)}e.prototype.init=function(){this.triggerElement&&(this.triggerElement.addEventListener("click",this.module.toggle),this.triggerElement.setAttribute("aria-controls",this.module.id),this.triggerElement.setAttribute("aria-expanded","false"),"true"===this.triggerElement.getAttribute("data-open-on-load")&&this.triggerElement.click()),this.clearFiltersTrigger&&this.clearFiltersTrigger.addEventListener("click",this.module.clearFilters),this.addGa4Tracking()},e.prototype.handleToggle=function(t){t.preventDefault(),this.module.classList.contains("facets--visible")?this.module.close():this.module.open()},e.prototype.handleOpen=function(){this.triggerElement.setAttribute("aria-expanded","true"),this.module.classList.add("facets--visible")},e.prototype.handleClose=function(){this.triggerElement.setAttribute("aria-expanded","false"),this.module.classList.remove("facets--visible")},e.prototype.handleClearFilters=function(t){t&&t.preventDefault();var e=this.module.querySelectorAll("input, select, .js-selected-counter"),o=document.querySelector(".js-live-search-form"),i=document.createEvent("HTMLEvents");i.initEvent("customFormChange",!0,!1);for(var n=0;n<e.length;n++){var s=e[n];switch(s.tagName){case"INPUT":"checkbox"===s.type&&!0===s.checked?s.checked=!1:"text"===s.type&&""!==s.value&&(s.value="");break;case"SELECT":s.selectedIndex=null;break;case"DIV":case"SPAN":s.parentNode.removeChild(s)}}o.dispatchEvent(i)},e.prototype.addGa4Tracking=function(){var t=document.querySelectorAll("[data-ga4-filter-parent]").length;this.triggerElement.setAttribute("data-ga4-event",JSON.stringify({event_name:"select_content",type:"finder",text:"Filter",section:"Filter",index_section:0,index_section_count:t}))},t.MobileFiltersModal=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.element=t}e.prototype.init=function(){this.element.addEventListener("click",function(t){"remove-filter-link"===t.target.getAttribute("data-module")&&this.toggleFilterHandler(t)}.bind(this))},e.prototype.toggleFilterHandler=function(t){t.preventDefault(),t.stopPropagation();var e=t.target,o=e.getAttribute("data-name"),i=e.getAttribute("data-value"),n=e.getAttribute("data-facet"),s=this.getInput(o,i,n);this.clearFacet(s,i,n)},e.prototype.clearFacet=function(t,e,o){var i=t.tagName,n=t.type,s=t.value;if("checkbox"===n)t.checked=!1,window.GOVUK.triggerEvent(t,"change",{detail:{suppressAnalytics:!0}});else if("text"===n||"search"===n||"hidden"===n){var r=" "+s.trim()+" ",a=" "+this.decodeEntities(e.toString())+" ",l=r.replace(a," ").replace(/ {2}/g," ").trim();t.value=l,window.GOVUK.triggerEvent(t,"change",{detail:{suppressAnalytics:!0}})}else if("OPTION"===i){var c=document.getElementById(o);c.value="",window.GOVUK.triggerEvent(c,"change",{detail:{suppressAnalytics:!0}})}},e.prototype.getInput=function(t,e,o){var i=t?"input[name='"+t+"']":"[value='"+e+"']";return document.getElementById(o).querySelector(i)},e.prototype.decodeEntities=function(t){return t.replace(/&quot;/g,'"')},t.RemoveFilter=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.$toggle=this.$module.querySelector(".js-toggle"),this.$content=this.$module.querySelector(".js-content"),this.$allInteractiveElements=this.$content.querySelectorAll("select, input[type=text]")}
e.prototype.init=function(){this.selectedElements=[];var t="true"===this.$module.getAttribute("data-open-on-load");this.replaceHeadingSpanWithButton(t),this.$module.toggleContent=this.toggleContent.bind(this),this.$toggleButton=this.$module.querySelector(".js-button"),this.$toggleButton.addEventListener("click",this.$module.toggleContent);var e=this.selectedString();e&&(this.attachSelectedCounter(e),this.$toggleButton.click()),this.bindChangeEvents.bind(this)()},e.prototype.bindChangeEvents=function(){for(var t=0;t<this.$allInteractiveElements.length;t++){var e=this.$allInteractiveElements[t];"SELECT"===e.tagName&&e.addEventListener("change",this.updateSelectedCount.bind(this)),"INPUT"===e.tagName&&(e.addEventListener("change",this.handleInputEvent.bind(this)),e.addEventListener("keyup",this.handleInputEvent.bind(this)))}},e.prototype.handleInputEvent=function(t){var e=13;t.keyCode!==e&&"change"!==t.type||this.updateSelectedCount()},e.prototype.replaceHeadingSpanWithButton=function(t){var e=this.$toggle.innerHTML,o=document.createElement("button");o.classList.add("app-c-expander__button"),o.classList.add("js-button"),o.setAttribute("type","button"),o.setAttribute("aria-expanded",t),o.setAttribute("aria-controls",this.$content.getAttribute("id"));var i=this.$module.getAttribute("data-button-data-attributes");if(i)try{for(var n in i=JSON.parse(i)){var s=n.replace(/_/g,"-").toLowerCase(),r=i[n],a="object"==typeof r?JSON.stringify(r):r;o.setAttribute("data-"+s,a)}}catch(t){console.error("Error with expander button data attributes, invalid JSON passed"+t.message,window.location)}o.innerHTML=e,this.$toggle.parentNode.replaceChild(o,this.$toggle)},e.prototype.toggleContent=function(){"false"===this.$toggleButton.getAttribute("aria-expanded")?(this.$toggleButton.setAttribute("aria-expanded",!0),this.$content.classList.add("app-c-expander__content--visible")):(this.$toggleButton.setAttribute("aria-expanded",!1),this.$content.classList.remove("app-c-expander__content--visible"))},e.prototype.attachSelectedCounter=function(t){var e=document.createElement("span");e.classList.add("app-c-expander__selected-counter"),e.classList.add("js-selected-counter"),e.innerHTML=t,this.$toggleButton.parentNode.insertBefore(e,this.$toggleButton.nextSibling)},e.prototype.updateSelectedCount=function(){var t=this.selectedString(),e=this.$module.querySelector(".js-selected-counter");t?e?e.innerHTML=t:this.attachSelectedCounter(t):e&&e.parentNode.removeChild(e)},e.prototype.selectedString=function(){this.getAllSelectedElements();var t=this.selectedElements.length,e=!1;return t>0&&(e=t+" selected"),e},e.prototype.getAllSelectedElements=function(){this.selectedElements=[];for(var t=this,e=0;e<this.$allInteractiveElements.length;e++)this.$allInteractiveElements[e].value.length>0&&t.selectedElements.push(e)},t.Expander=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";class e{constructor(t){this.$module=t,this.$button=this.$module.querySelector(".app-c-filter-panel__button"),this.$content=this.$module.querySelector(".app-c-filter-panel__content")}init(){this.$module.getAttribute("open")?this.$button.setAttribute("aria-expanded","true"):(this.$button.setAttribute("aria-expanded","false"),this.$content.setAttribute("hidden","")),this.$button.addEventListener("click",this.onButtonClick.bind(this))}onButtonClick(t){t.preventDefault(),this.toggle()}toggle(){const t="true"!==this.$button.getAttribute("aria-expanded");this.$button.setAttribute("aria-expanded",t),this.$content.toggleAttribute("hidden")}}t.FilterPanel=e}(window.GOVUK.Modules);for(var $elementsRequiringJavascript=document.querySelectorAll(".js-required"),i=0;i<$elementsRequiringJavascript.length;i++)$elementsRequiringJavascript[i].style.display="block";var $form=document.querySelector(".js-live-search-form"),$results=document.querySelector(".js-live-search-results-block"),$atomAutodiscoveryLink=document.querySelector("link[type='application/atom+xml']");$form&&$results&&new GOVUK.LiveSearch({$form:$form,$results:$results,$atomAutodiscoveryLink:$atomAutodiscoveryLink});