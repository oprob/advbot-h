!function(){"use strict";window.GOVUK=window.GOVUK||{};var t={essential:!0,settings:!1,usage:!1,campaigns:!1},e={cookies_policy:"essential",seen_cookie_message:"essential",cookie_preferences_set:"essential",cookies_preferences_set:"essential","_email-alert-frontend_session":"essential",intervention_campaign:"essential",licensing_session:"essential",govuk_contact_referrer:"essential",multivariatetest_cohort_coronavirus_extremely_vulnerable_rate_limit:"essential",dgu_beta_banner_dismissed:"settings",global_bar_seen:"settings",user_nation:"settings","JS-Detection":"usage",TLSversion:"usage",_ga_VBLT2V3FZR:"usage",_ga_P1DGM6TVYF:"usage",_ga_S5RQ7FTGVR:"usage"};window.GOVUK.cookie=function(t,e,o){return void 0!==e?!1===e||null===e?window.GOVUK.setCookie(t,"",{days:-1}):(void 0===o&&(o={days:30}),window.GOVUK.setCookie(t,e,o)):window.GOVUK.getCookie(t)},window.GOVUK.setDefaultConsentCookie=function(){window.GOVUK.setConsentCookie(t)},window.GOVUK.approveAllCookieTypes=function(){var t={essential:!0,settings:!0,usage:!0,campaigns:!0};window.GOVUK.setCookie("cookies_policy",JSON.stringify(t),{days:365})},window.GOVUK.getConsentCookie=function(){var t,e=window.GOVUK.cookie("cookies_policy");if(!e)return null;try{t=JSON.parse(e)}catch(t){return null}return"object"!=typeof t&&null!==t&&(t=JSON.parse(t)),t},window.GOVUK.setConsentCookie=function(o){var i=window.GOVUK.getConsentCookie();for(var s in i||(i=JSON.parse(JSON.stringify(t))),o)if(i[s]=o[s],!o[s])for(var n in e)e[n]===s&&window.GOVUK.deleteCookie(n);window.GOVUK.setCookie("cookies_policy",JSON.stringify(i),{days:365})},window.GOVUK.checkConsentCookieCategory=function(t,o){var i=window.GOVUK.getConsentCookie();if(!i&&e[t])return!0;i=window.GOVUK.getConsentCookie();try{return i[o]}catch(t){return console.error(t),!1}},window.GOVUK.checkConsentCookie=function(t,o){if("cookies_policy"===t||null===o||!1===o)return!0;if(t.match("^govuk_surveySeen")||t.match("^govuk_taken"))return window.GOVUK.checkConsentCookieCategory(t,"settings");if(e[t]){var i=e[t];return window.GOVUK.checkConsentCookieCategory(t,i)}return!1},window.GOVUK.setCookie=function(t,e,o){if(window.GOVUK.checkConsentCookie(t,e)){void 0===o&&(o={});var i=t+"="+e+"; path=/";if(o.days){var s=new Date;s.setTime(s.getTime()+24*o.days*60*60*1e3),i=i+"; expires="+s.toGMTString()}"https:"===document.location.protocol&&(i+="; Secure"),document.cookie=i}},window.GOVUK.getCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),i=0,s=o.length;i<s;i++){for(var n=o[i];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return decodeURIComponent(n.substring(e.length))}return null},window.GOVUK.getCookieCategory=function(t){return e[t]},window.GOVUK.deleteCookie=function(t){window.GOVUK.cookie(t,null),window.GOVUK.expireCookie(t)},window.GOVUK.expireCookie=function(t,e=""){var o=new Date(0);document.cookie=t+"="+e+";expires="+o+";",document.cookie=t+"="+e+";expires="+o+";domain="+window.location.hostname+";path=/"},window.GOVUK.deleteUnconsentedCookies=function(){var t=window.GOVUK.getConsentCookie();for(var o in t)if(!t[o])for(var i in e)e[i]===o&&window.GOVUK.deleteCookie(i)}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.submitSettingsForm=this.submitSettingsForm.bind(this),document.querySelector("form[data-module=cookie-settings]").addEventListener("submit",this.$module.submitSettingsForm),window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.init(this.setInitialFormValues.bind(this)):this.setInitialFormValues()},e.prototype.setInitialFormValues=function(){window.GOVUK.cookie("cookies_policy")||window.GOVUK.useSingleConsentApi||window.GOVUK.setDefaultConsentCookie();var t=window.GOVUK.cookie("cookies_policy");if(t){var e=JSON.parse(t);for(var o in delete e.essential,e){var i;(i=e[o]?document.querySelector("input[name=cookies-"+o+"][value=on]"):document.querySelector("input[name=cookies-"+o+"][value=off]"))&&(i.checked=!0)}}},e.prototype.submitSettingsForm=function(t){t.preventDefault();for(var e=t.target.getElementsByTagName("input"),o={},i=0;i<e.length;i++){var s=e[i];if(s.checked){var n=s.name.replace("cookies-",""),a="on"===s.value;o[n]=a,"usage"!==n||a||(window.GOVUK.stopSendingAnalytics=!0,window.GOVUK.LUX={})}}return window.GOVUK.useSingleConsentApi?window.GOVUK.singleConsent.setPreferences(null,o):(window.GOVUK.setConsentCookie(o),window.GOVUK.setCookie("cookies_preferences_set",!0,{days:365})),this.showConfirmationMessage(),!1},e.prototype.showConfirmationMessage=function(){var t=document.querySelector("div[data-cookie-confirmation]");t.style.display="none";var o=document.querySelector(".cookie-settings__prev-page"),i=e.prototype.getReferrerLink();document.body.scrollTop=document.documentElement.scrollTop=0,o&&(i&&i!==document.location.pathname?(o.href=i,o.style.display="inline"):o.style.display="none"),t.style.display="block"},e.prototype.getReferrerLink=function(){var t=!1;try{t=document.referrer||new URL(document.referrer).pathname}catch(t){console.warn("Error grabbing referrer for cookie settings",window.location,t)}return t},t.CookieSettings=e}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.extendObject=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var o in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],o)&&(t[o]=arguments[e][o]);return t}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t,e){for(var o in this.$table=t,this.options={outOf:65,applyOnInit:!0,autoOutdent:!1,outdentAll:!1,chartVisibleText:"Change to table and accessible view",tableVisibleText:"Change to chart view",chartAlertText:"Chart visible",tableAlertText:"Table visible",toggleAfter:!1,returnReference:!1},e)this.options[o]=e[o]}e.prototype.init=function(){(this.detectIEVersion(),this.ENABLED=!(this.ie&&this.ie<8),this.$graphContainer=document.createElement("div"),this.$graphContainer.className="mc-chart-container",this.$graph=document.createElement("div"),this.$graph.setAttribute("aria-hidden","true"),this.$graph.setAttribute("class",this.$table.className),this.$graph.classList.add("mc-chart"),this.chartId=this.getChartId(),this.options.stacked=this.$table.classList.contains("mc-stacked"),this.options.stacked)&&(0===this.$table.querySelectorAll("thead th").length&&(this.ENABLED=!1));this.options.negative=this.$table.classList.contains("mc-negative");var t=this.$table.querySelectorAll("tbody tr")[0].querySelectorAll("th, td").length>2;if(this.options.multiple=!this.options.stacked&&(this.$table.classList.contains("mc-multiple")||t),this.options.autoOutdent=this.options.autoOutdent||this.$table.classList.contains("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.classList.contains("mc-outdented"),this.options.multiple&&this.$graph.classList.add("mc-multiple"),this.options.hasCaption=!!this.$table.querySelectorAll("caption").length,this.ENABLED&&(this.apply(),this.options.applyOnInit||this.toggleLink.click()),this.options.returnReference)return this},e.prototype.detectIEVersion=function(){this.ie=function(){var t,e=3,o=document.createElement("div"),i=o.getElementsByTagName("i");do{o.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->"}while(e<10&&i[0]);return e>4?e:t}()},e.prototype.apply=function(){if(this.ENABLED)try{this.constructChart(),this.addClassesToHeader(),this.applyWidths(),this.insert(),this.$table.classList.add("mc-hidden"),this.applyOutdent()}catch(t){console.error("MagnaCharta error:",t)}},e.prototype.construct={},e.prototype.construct.thead=function(){var t=document.createElement("div");t.classList.add("mc-thead");var e=document.createElement("div");e.classList.add("mc-tr");for(var o="",i=this.$table.querySelectorAll("thead th"),s=0;s<i.length;s++)o+='<div class="mc-th">',o+=i[s].innerHTML,o+="</div>";return e.innerHTML=o,t.appendChild(e),t},e.prototype.construct.tbody=function(){var t=document.createElement("div");t.classList.add("mc-tbody");for(var e=this.$table.querySelectorAll("tbody tr"),o=0;o<e.length;o++){var i=document.createElement("div");i.classList.add("mc-tr");for(var s="",n=e[o].querySelectorAll("th, td"),a=0;a<n.length;a++)s+='<div class="mc-td">',s+=n[a].innerHTML,s+="</div>";i.innerHTML=s,t.appendChild(i)}return t},e.prototype.construct.caption=function(){return this.$table.querySelector("caption").cloneNode(!0)},e.prototype.construct.toggleLink=function(t){var e=document.createElement("button"),o=document.createElement("span"),i=document.createElement("span");return o.classList.add("mc-toggle-text"),o.innerHTML=t,i.classList.add("govuk-visually-hidden","mc-toggle-status"),i.setAttribute("role","alert"),e.classList.add("govuk-body-s","mc-toggle-button"),e.appendChild(o),e.appendChild(i),e},e.prototype.addToggleClick=function(t,e,o,i){var s=this;this.toggleLink.addEventListener("click",(function(n){n.preventDefault();var a=s.toggleLink.querySelector(".mc-toggle-text"),r=s.toggleLink.querySelector(".mc-toggle-status");s.$graphContainer.classList.toggle("mc-hidden"),s.$table.classList.toggle("mc-hidden"),a.innerHTML=a.innerHTML===e?t:e,r.innerHTML=r.innerHTML===i?o:i}))},e.prototype.constructChart=function(){var t=this.construct.thead.call(this),e=this.construct.tbody.call(this);if(this.toggleLink=this.construct.toggleLink(this.options.chartVisibleText),this.addToggleClick(this.options.chartVisibleText,this.options.tableVisibleText,this.options.chartAlertText,this.options.tableAlertText),this.options.hasCaption){var o=this.construct.caption.call(this);this.$graph.appendChild(o)}this.options.toggleAfter?this.$table.insertAdjacentElement("afterend",this.toggleLink):this.$table.insertAdjacentElement("beforebegin",this.toggleLink),this.$graph.appendChild(t),this.$graph.appendChild(e)},e.prototype.utils={isFloat:function(t){return!isNaN(parseFloat(t))},stripValue:function(t){return t.replace(/,|\xa3|%|[a-z]/gi,"")},returnMax:function(t){for(var e=0,o=0;o<t.length;o++)t[o]>e&&(e=t[o]);return e},isNegative:function(t){return t<0}},e.prototype.addClassesToHeader=function(){var t=this.$graph.querySelectorAll(".mc-th"),e=t.length;this.options.stacked&&(t[e-1].classList.add("mc-stacked-header","mc-header-total"),e-=1);for(var o=1;o<e;o++)t[o].classList.add("mc-key-header"),t[o].classList.contains("mc-stacked-header")||t[o].classList.add("mc-key-"+o)},e.prototype.calculateMaxWidth=function(){for(var t=[],e=0,o=this.$graph.querySelectorAll(".mc-tr"),i=0;i<o.length;i++){for(var s=o[i],n=s.querySelectorAll(".mc-td"),a=[],r=1;r<n.length;r++)a.push(n[r]);var l=a.length;if(l){this.options.stacked&&(a[l-1].classList.add("mc-stacked-total"),l-=1);var c=s.querySelector(".mc-td");c&&c.classList.add("mc-key-cell");for(var d=0,u=0;u<l;u++){var h=a[u];h.classList.add("mc-bar-cell"),h.classList.add("mc-bar-"+(u+1));var p=this.utils.stripValue(h.innerText);if(this.utils.isFloat(p)){var m=parseFloat(p,10),g=Math.abs(m);0===m&&h.classList.add("mc-bar-zero"),this.options.negative&&(this.utils.isNegative(m)?(h.classList.add("mc-bar-negative"),g>e&&(e=g)):h.classList.add("mc-bar-positive")),m=g,this.options.stacked?d+=m:(d=m,t.push(m))}}}this.options.stacked&&t.push(d)}var w={};return w.max=parseFloat(this.utils.returnMax(t),10),w.single=parseFloat(this.options.outOf/w.max,10),this.options.negative&&(w.marginLeft=parseFloat(e,10)*w.single,w.maxNegative=parseFloat(e,10)),w},e.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();for(var t=this.$graph.querySelectorAll(".mc-tr"),e=0;e<t.length;e++)for(var o=t[e].querySelectorAll(".mc-bar-cell"),i=0;i<o.length;i++){var s=o[i],n=parseFloat(this.utils.stripValue(s.innerText),10),a=n*this.dimensions.single,r=Math.abs(n),l=Math.abs(a);if(this.options.negative)if(s.classList.contains("mc-bar-positive"))s.style.marginLeft=this.dimensions.marginLeft+"%";else if(r<this.dimensions.maxNegative){var c=(this.dimensions.maxNegative-r)*this.dimensions.single;s.style.marginLeft=c+"%"}s.innerHTML="<span>"+s.innerHTML+"</span>",s.style.width=l+"%"}},e.prototype.insert=function(){var t=document.createElement("span"),e="mc-chart-not-accessible-"+this.chartId;t.innerHTML="This content is not accessible - switch to table",t.className="mc-hidden",t.id=e,this.$graphContainer.setAttribute("aria-labelledby",e),this.$graphContainer.appendChild(this.$graph),this.$graphContainer.appendChild(t),this.$table.insertAdjacentElement("afterend",this.$graphContainer)},e.prototype.applyOutdent=function(){for(var t=this.$graph.querySelectorAll(".mc-bar-cell"),e=0;e<t.length;e++){var o=t[e],i=parseFloat(this.utils.stripValue(o.innerText),10),s=o.querySelector("span"),n=o.querySelector("span").offsetWidth+10,a=o.offsetWidth;this.options.stacked?(n>a&&i>0||i<1)&&o.classList.add("mc-value-overflow"):(0===i&&o.classList.add("mc-bar-outdented"),this.options.autoOutdent&&n>=a||this.options.outdentAll?(o.classList.add("mc-bar-outdented"),s.style.marginLeft="100%",s.style.display="inline-block"):o.classList.add("mc-bar-indented"))}},e.prototype.getChartId=function(){for(var t=document.querySelectorAll("table.js-barchart-table"),e=null,o=0;o<t.length;o++)t[o]===this.$table&&(e=o);return e},t.MagnaCharta=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},function(t){"use strict";var e=function(t){this.$element=t};e.prototype.init=function(){for(var e=this.$element.querySelectorAll(".js-barchart-table"),o=[],i=0;i<e.length;i++){var s=e[i].className;-1===s.indexOf("mc-chart")&&-1===s.indexOf("js-barchart-table-init")&&o.push(e[i])}for(var n=0;n<o.length;n++){var a=o[n];new t.Modules.MagnaCharta(a,{toggleText:"Change between chart and table"}).init(),a.className=a.className+" js-barchart-table-init"}},t.GovspeakBarchartEnhancement=e}(window.GOVUK),function(){"use strict";window.GOVUK=window.GOVUK||{};var t=window.GOVUK||{},e=function(t,e){this.$element=t,this.$classOverride=void 0!==e?e:"gem-c-govspeak__youtube-video"};e.prototype.init=function(){if(!this.campaignCookiesAllowed())return this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start),void this.decorateLink();this.startModule()},e.prototype.decorateLink=function(){for(var t=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]'),e=0;e<t.length;++e){var o=t[e],i=o.closest("p"),s=o.getAttribute("href"),n=o.textContent,a=document.createElement("p");a.setAttribute("class","gem-c-govspeak__youtube-placeholder govuk-body");var r=`\n        <span class="govuk-heading-s">How to watch this YouTube video</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">There's a YouTube video on this page. You can't access it because of your cookie settings.</span>\n        <span class="gem-c-govspeak__youtube-placeholder-text">You can <a href="/help/cookies" class="govuk-link">change your cookie settings</a> or watch the video on YouTube instead:</span>\n        <a href="${s}" class="govuk-link">${n}</a>\n      `;a.innerHTML=r,i.after(a),i.classList.add("gem-c-govspeak__youtube-placeholder-link")}},e.prototype.startModule=function(){window.removeEventListener("cookie-consent",this.start);for(var t=this.$element.querySelectorAll(".gem-c-govspeak__youtube-placeholder"),o=0;o<t.length;++o)t[o].remove();var i=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]');i.length>0&&e.insertApiScript();for(var s=0;s<i.length;++s){var n=i[s],a=n.getAttribute("href"),r={link:n};if(a.includes("/live_stream")){var l=e.parseLivestream(a);!this.hasDisabledEmbed(n)&&l&&(r.channel=l,this.setupVideo(r))}else{var c=e.parseVideoId(a);!this.hasDisabledEmbed(n)&&c&&(r.videoId=c,this.setupVideo(r))}}},e.prototype.hasDisabledEmbed=function(t){return"off"===t.getAttribute("data-youtube-player")},e.prototype.setupVideo=function(t){var o=e.nextId(),i=t.link,s=t.videoId?t.videoId:t.channel,n=i.parentNode,a=n.parentNode,r=document.createElement("div");r.className+=this.$classOverride,r.innerHTML='<span id="'+o+'" data-video-id="'+s+'"></span>',t.title=i.textContent,a.replaceChild(r,n),this.insertVideo(o,t)},e.prototype.insertVideo=function(t,o){var i="",s="";o.channel?(i=o.channel,s="live_stream"):s=o.videoId;var n=function(){new window.YT.Player(t,{videoId:s,host:"https://www.youtube-nocookie.com",playerVars:{enablejsapi:1,origin:window.location.origin,rel:0,disablekb:1,modestbranding:1,channel:i},events:{onReady:function(t){var e=o.title;t.target.getIframe().title=e+" (video)",window.GOVUK.analyticsGa4.analyticsModules&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.configureVideo(t)},onStateChange:function(t){var e=t.data,o={"-1":"VideoUnstarted",0:"VideoEnded",1:"VideoPlaying",2:"VideoPaused",3:"VideoBuffering",5:"VideoCued"};window.GOVUK.analyticsGa4.analyticsModules.VideoTracker&&window.GOVUK.analyticsGa4.analyticsModules.VideoTracker.trackVideo(t,o[e])}}})};n=n.bind(this),e.playerApiReady?n.call():e.queuedInserts.push(n)},e.prototype.campaignCookiesAllowed=function(){var t=window.GOVUK.getConsentCookie();return null!==t&&t.campaigns},e.nextId=function(){return this.embedCount=this.embedCount||0,this.embedCount+=1,"youtube-"+this.embedCount},e.insertApiScript=function(){if(!this.apiScriptInserted){var t=document.createElement("script");t.src="https://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),this.apiScriptInserted=!0}},e.parseLivestream=function(t){var e=t.match(/channel=([^&]*)/);if(e)return e[1]},e.parseVideoId=function(t){var e;try{e=new URL(t)}catch(t){return}return"www.youtube.com"===e.host||"youtube.com"===e.host?e.searchParams.get("v")||void 0:"youtu.be"===e.host?e.pathname.slice(1):void 0},e.apiScriptInserted=!1,e.playerApiReady=!1,e.queuedInserts=[],window.onYouTubePlayerAPIReady=function(){e.playerApiReady=!0;for(var t=0;t<e.queuedInserts.length;t++)e.queuedInserts[t].call()},t.GovspeakYoutubeLinkEnhancement=e}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.focus()},t.InitialFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.toggleTarget=this.$module.querySelector(".js-class-toggle"),this.$module.addFocusClass=this.addFocusClass.bind(this),this.$module.removeFocusClassFromEmptyInput=this.removeFocusClassFromEmptyInput.bind(this),this.inputIsEmpty()||this.addFocusClass(),this.toggleTarget.addEventListener("focus",this.$module.addFocusClass),this.toggleTarget.addEventListener("blur",this.$module.removeFocusClassFromEmptyInput)},e.prototype.inputIsEmpty=function(){return""===this.toggleTarget.value},e.prototype.addFocusClass=function(){this.toggleTarget.classList.add("focus")},e.prototype.removeFocusClassFromEmptyInput=function(){this.inputIsEmpty()&&this.toggleTarget.classList.remove("focus")},t.GemToggleInputClassOnFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.toggleTrigger=this.$module.querySelector("[data-controls][data-expanded]"),this.$module.toggleTrigger&&(this.$module.toggleClass=this.$module.getAttribute("data-toggle-class")||"js-hidden",this.addAriaAttrs(),this.toggleOnClick())},e.prototype.addAriaAttrs=function(){this.$module.toggleTrigger.setAttribute("role","button"),this.$module.toggleTrigger.setAttribute("aria-controls",this.$module.toggleTrigger.getAttribute("data-controls")),this.$module.toggleTrigger.setAttribute("aria-expanded",this.$module.toggleTrigger.getAttribute("data-expanded")),this.$module.targets=this.getTargetElements();for(var t=0;t<this.$module.targets.length;t++)this.$module.targets[t].setAttribute("aria-live","polite"),this.$module.targets[t].setAttribute("role","region")},e.prototype.getTargetElements=function(){var t="#"+this.$module.toggleTrigger.getAttribute("aria-controls").split(" ").join(", #");return this.$module.querySelectorAll(t)},e.prototype.toggleOnClick=function(){var t=this;this.$module.toggleTrigger.addEventListener("click",(function(e){if(e.preventDefault(),"true"===this.getAttribute("aria-expanded")){this.setAttribute("aria-expanded",!1);for(var o=0;o<t.$module.targets.length;o++)t.$module.targets[o].classList.add(t.$module.toggleClass)}else{this.setAttribute("aria-expanded",!0);for(var i=0;i<t.$module.targets.length;i++)t.$module.targets[i].classList.remove(t.$module.toggleClass)}var s=this.getAttribute("data-toggled-text");"string"==typeof s&&(this.setAttribute("data-toggled-text",this.innerText),this.innerText=s)}))},t.GemToggle=e}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.triggerEvent=function(t,e,o){var i,s=o||{},n=s.keyCode;Object.prototype.hasOwnProperty.call(s,"bubbles")||(s.bubbles=!0),Object.prototype.hasOwnProperty.call(s,"cancelable")||(s.cancelable=!0),"function"==typeof window.CustomEvent?i=new window.CustomEvent(e,s):(i=document.createEvent("CustomEvent")).initCustomEvent(e,s.bubbles,s.cancelable,s.detail),n&&(i.keyCode=n),s.shiftKey&&(i.shiftKey=!0),t.dispatchEvent(i)}}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GOVUKFrontend={})}(this,(function(t){"use strict";function e(t,e){const o=t?t.trim():"";let i,s=null==e?void 0:e.type;switch(s||(["true","false"].includes(o)&&(s="boolean"),o.length>0&&isFinite(Number(o))&&(s="number")),s){case"boolean":i="true"===o;break;case"number":i=Number(o);break;default:i=t}return i}function o(...t){const e={};for(const i of t)for(const t of Object.keys(i)){const s=e[t],n=i[t];r(s)&&r(n)?e[t]=o(s,n):e[t]=n}return e}function i(t,o,i){const s=t.schema.properties[i];if("object"!==(null==s?void 0:s.type))return;const n={[i]:{}};for(const[t,s]of Object.entries(o)){let o=n;const a=t.split(".");for(const[n,l]of a.entries())"object"==typeof o&&(n<a.length-1?(r(o[l])||(o[l]={}),o=o[l]):t!==i&&(o[l]=e(s)))}return n[i]}function s(t,e){return t instanceof HTMLElement&&t.hasAttribute(`data-${e}-init`)}function n(t=document.body){return!!t&&t.classList.contains("govuk-frontend-supported")}function a(t){return Array.isArray(t)}function r(t){return!!t&&"object"==typeof t&&!a(t)}function l(t,e){return`${t.moduleName}: ${e}`}function c(t,o){const s={};for(const[n,a]of Object.entries(t.schema.properties))n in o&&(s[n]=e(o[n],a)),"object"===(null==a?void 0:a.type)&&(s[n]=i(t,o,n));return s}class d extends Error{constructor(...t){super(...t),this.name="GOVUKFrontendError"}}class u extends d{constructor(t=document.body){const e="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(t?e:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class h extends d{constructor(t){let e="string"==typeof t?t:"";if("object"==typeof t){const{component:o,identifier:i,element:s,expectedType:n}=t;e=i,e+=s?` is not of type ${null!=n?n:"HTMLElement"}`:" not found",e=l(o,e)}super(e),this.name="ElementError"}}class p extends d{constructor(t){super("string"==typeof t?t:l(t,"Root element (`$root`) already initialised")),this.name="InitError"}}class m{get $root(){return this._$root}constructor(t){this._$root=void 0;const e=this.constructor;if("string"!=typeof e.moduleName)throw new p("`moduleName` not defined in component");if(!(t instanceof e.elementType))throw new h({element:t,component:e,identifier:"Root element (`$root`)",expectedType:e.elementType.name});this._$root=t,e.checkSupport(),this.checkInitialised();const o=e.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const t=this.constructor,e=t.moduleName;if(e&&s(this.$root,e))throw new p(t)}static checkSupport(){if(!n())throw new u}}m.elementType=HTMLElement;class g{constructor(t={},e={}){var o;this.translations=void 0,this.locale=void 0,this.translations=t,this.locale=null!=(o=e.locale)?o:document.documentElement.lang||"en"}t(t,e){if(!t)throw new Error("i18n: lookup key missing");let o=this.translations[t];if("number"==typeof(null==e?void 0:e.count)&&"object"==typeof o){const i=o[this.getPluralSuffix(t,e.count)];i&&(o=i)}if("string"==typeof o){if(o.match(/%{(.\S+)}/)){if(!e)throw new Error("i18n: cannot replace placeholders in string if no option data provided");return this.replacePlaceholders(o,e)}return o}return t}replacePlaceholders(t,e){const o=Intl.NumberFormat.supportedLocalesOf(this.locale).length?new Intl.NumberFormat(this.locale):void 0;return t.replace(/%{(.\S+)}/g,(function(t,i){if(Object.prototype.hasOwnProperty.call(e,i)){const t=e[i];return!1===t||"number"!=typeof t&&"string"!=typeof t?"":"number"==typeof t?o?o.format(t):`${t}`:t}throw new Error(`i18n: no data found to replace ${t} placeholder in string`)}))}hasIntlPluralRulesSupport(){return Boolean("PluralRules"in window.Intl&&Intl.PluralRules.supportedLocalesOf(this.locale).length)}getPluralSuffix(t,e){if(e=Number(e),!isFinite(e))return"other";const o=this.translations[t],i=this.hasIntlPluralRulesSupport()?new Intl.PluralRules(this.locale).select(e):this.selectPluralFormUsingFallbackRules(e);if("object"==typeof o){if(i in o)return i;if("other"in o)return console.warn(`i18n: Missing plural form ".${i}" for "${this.locale}" locale. Falling back to ".other".`),"other"}throw new Error(`i18n: Plural form ".other" is required for "${this.locale}" locale`)}selectPluralFormUsingFallbackRules(t){t=Math.abs(Math.floor(t));const e=this.getPluralRulesForLocale();return e?g.pluralRules[e](t):"other"}getPluralRulesForLocale(){const t=this.locale.split("-")[0];for(const e in g.pluralRulesMap){const o=g.pluralRulesMap[e];if(o.includes(this.locale)||o.includes(t))return e}}}g.pluralRulesMap={arabic:["ar"],chinese:["my","zh","id","ja","jv","ko","ms","th","vi"],french:["hy","bn","fr","gu","hi","fa","pa","zu"],german:["af","sq","az","eu","bg","ca","da","nl","en","et","fi","ka","de","el","hu","lb","no","so","sw","sv","ta","te","tr","ur"],irish:["ga"],russian:["ru","uk"],scottish:["gd"],spanish:["pt-PT","it","es"],welsh:["cy"]},g.pluralRules={arabic:t=>0===t?"zero":1===t?"one":2===t?"two":t%100>=3&&t%100<=10?"few":t%100>=11&&t%100<=99?"many":"other",chinese:()=>"other",french:t=>0===t||1===t?"one":"other",german:t=>1===t?"one":"other",irish:t=>1===t?"one":2===t?"two":t>=3&&t<=6?"few":t>=7&&t<=10?"many":"other",russian(t){const e=t%100,o=e%10;return 1===o&&11!==e?"one":o>=2&&o<=4&&!(e>=12&&e<=14)?"few":0===o||o>=5&&o<=9||e>=11&&e<=14?"many":"other"},scottish:t=>1===t||11===t?"one":2===t||12===t?"two":t>=3&&t<=10||t>=13&&t<=19?"few":"other",spanish:t=>1===t?"one":t%1e6==0&&0!==t?"many":"other",welsh:t=>0===t?"zero":1===t?"one":2===t?"two":3===t?"few":6===t?"many":"other"};class w extends m{constructor(t,e={}){super(t),this.config=void 0,this.i18n=void 0,this.controlsClass="govuk-accordion__controls",this.showAllClass="govuk-accordion__show-all",this.showAllTextClass="govuk-accordion__show-all-text",this.sectionClass="govuk-accordion__section",this.sectionExpandedClass="govuk-accordion__section--expanded",this.sectionButtonClass="govuk-accordion__section-button",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionHeadingDividerClass="govuk-accordion__section-heading-divider",this.sectionHeadingTextClass="govuk-accordion__section-heading-text",this.sectionHeadingTextFocusClass="govuk-accordion__section-heading-text-focus",this.sectionShowHideToggleClass="govuk-accordion__section-toggle",this.sectionShowHideToggleFocusClass="govuk-accordion__section-toggle-focus",this.sectionShowHideTextClass="govuk-accordion__section-toggle-text",this.upChevronIconClass="govuk-accordion-nav__chevron",this.downChevronIconClass="govuk-accordion-nav__chevron--down",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionSummaryFocusClass="govuk-accordion__section-summary-focus",this.sectionContentClass="govuk-accordion__section-content",this.$sections=void 0,this.$showAllButton=null,this.$showAllIcon=null,this.$showAllText=null,this.config=o(w.defaults,e,c(w,this.$root.dataset)),this.i18n=new g(this.config.i18n);const i=this.$root.querySelectorAll(`.${this.sectionClass}`);if(!i.length)throw new h({component:w,identifier:`Sections (\`<div class="${this.sectionClass}">\`)`});this.$sections=i,this.initControls(),this.initSectionHeaders(),this.updateShowAllButton(this.areAllSectionsOpen())}initControls(){this.$showAllButton=document.createElement("button"),this.$showAllButton.setAttribute("type","button"),this.$showAllButton.setAttribute("class",this.showAllClass),this.$showAllButton.setAttribute("aria-expanded","false"),this.$showAllIcon=document.createElement("span"),this.$showAllIcon.classList.add(this.upChevronIconClass),this.$showAllButton.appendChild(this.$showAllIcon);const t=document.createElement("div");t.setAttribute("class",this.controlsClass),t.appendChild(this.$showAllButton),this.$root.insertBefore(t,this.$root.firstChild),this.$showAllText=document.createElement("span"),this.$showAllText.classList.add(this.showAllTextClass),this.$showAllButton.appendChild(this.$showAllText),this.$showAllButton.addEventListener("click",(()=>this.onShowOrHideAllToggle())),"onbeforematch"in document&&document.addEventListener("beforematch",(t=>this.onBeforeMatch(t)))}initSectionHeaders(){this.$sections.forEach(((t,e)=>{const o=t.querySelector(`.${this.sectionHeaderClass}`);if(!o)throw new h({component:w,identifier:`Section headers (\`<div class="${this.sectionHeaderClass}">\`)`});this.constructHeaderMarkup(o,e),this.setExpanded(this.isExpanded(t),t),o.addEventListener("click",(()=>this.onSectionToggle(t))),this.setInitialState(t)}))}constructHeaderMarkup(t,e){const o=t.querySelector(`.${this.sectionButtonClass}`),i=t.querySelector(`.${this.sectionHeadingClass}`),s=t.querySelector(`.${this.sectionSummaryClass}`);if(!i)throw new h({component:w,identifier:`Section heading (\`.${this.sectionHeadingClass}\`)`});if(!o)throw new h({component:w,identifier:`Section button placeholder (\`<span class="${this.sectionButtonClass}">\`)`});const n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("aria-controls",`${this.$root.id}-content-${e+1}`);for(const t of Array.from(o.attributes))"id"!==t.name&&n.setAttribute(t.name,t.value);const a=document.createElement("span");a.classList.add(this.sectionHeadingTextClass),a.id=o.id;const r=document.createElement("span");r.classList.add(this.sectionHeadingTextFocusClass),a.appendChild(r),Array.from(o.childNodes).forEach((t=>r.appendChild(t)));const l=document.createElement("span");l.classList.add(this.sectionShowHideToggleClass),l.setAttribute("data-nosnippet","");const c=document.createElement("span");c.classList.add(this.sectionShowHideToggleFocusClass),l.appendChild(c);const d=document.createElement("span"),u=document.createElement("span");if(u.classList.add(this.upChevronIconClass),c.appendChild(u),d.classList.add(this.sectionShowHideTextClass),c.appendChild(d),n.appendChild(a),n.appendChild(this.getButtonPunctuationEl()),s){const t=document.createElement("span"),e=document.createElement("span");e.classList.add(this.sectionSummaryFocusClass),t.appendChild(e);for(const e of Array.from(s.attributes))t.setAttribute(e.name,e.value);Array.from(s.childNodes).forEach((t=>e.appendChild(t))),s.remove(),n.appendChild(t),n.appendChild(this.getButtonPunctuationEl())}n.appendChild(l),i.removeChild(o),i.appendChild(n)}onBeforeMatch(t){const e=t.target;if(!(e instanceof Element))return;const o=e.closest(`.${this.sectionClass}`);o&&this.setExpanded(!0,o)}onSectionToggle(t){const e=!this.isExpanded(t);this.setExpanded(e,t),this.storeState(t,e)}onShowOrHideAllToggle(){const t=!this.areAllSectionsOpen();this.$sections.forEach((e=>{this.setExpanded(t,e),this.storeState(e,t)})),this.updateShowAllButton(t)}setExpanded(t,e){const o=e.querySelector(`.${this.upChevronIconClass}`),i=e.querySelector(`.${this.sectionShowHideTextClass}`),s=e.querySelector(`.${this.sectionButtonClass}`),n=e.querySelector(`.${this.sectionContentClass}`);if(!n)throw new h({component:w,identifier:`Section content (\`<div class="${this.sectionContentClass}">\`)`});if(!o||!i||!s)return;const a=t?this.i18n.t("hideSection"):this.i18n.t("showSection");i.textContent=a,s.setAttribute("aria-expanded",`${t}`)
;const r=[],l=e.querySelector(`.${this.sectionHeadingTextClass}`);l&&r.push(`${l.textContent}`.trim());const c=e.querySelector(`.${this.sectionSummaryClass}`);c&&r.push(`${c.textContent}`.trim());const d=t?this.i18n.t("hideSectionAriaLabel"):this.i18n.t("showSectionAriaLabel");r.push(d),s.setAttribute("aria-label",r.join(" , ")),t?(n.removeAttribute("hidden"),e.classList.add(this.sectionExpandedClass),o.classList.remove(this.downChevronIconClass)):(n.setAttribute("hidden","until-found"),e.classList.remove(this.sectionExpandedClass),o.classList.add(this.downChevronIconClass)),this.updateShowAllButton(this.areAllSectionsOpen())}isExpanded(t){return t.classList.contains(this.sectionExpandedClass)}areAllSectionsOpen(){return Array.from(this.$sections).every((t=>this.isExpanded(t)))}updateShowAllButton(t){this.$showAllButton&&this.$showAllText&&this.$showAllIcon&&(this.$showAllButton.setAttribute("aria-expanded",t.toString()),this.$showAllText.textContent=t?this.i18n.t("hideAllSections"):this.i18n.t("showAllSections"),this.$showAllIcon.classList.toggle(this.downChevronIconClass,!t))}getIdentifier(t){const e=t.querySelector(`.${this.sectionButtonClass}`);return null==e?void 0:e.getAttribute("aria-controls")}storeState(t,e){if(!this.config.rememberExpanded)return;const o=this.getIdentifier(t);if(o)try{window.sessionStorage.setItem(o,e.toString())}catch(t){}}setInitialState(t){if(!this.config.rememberExpanded)return;const e=this.getIdentifier(t);if(e)try{const o=window.sessionStorage.getItem(e);null!==o&&this.setExpanded("true"===o,t)}catch(t){}}getButtonPunctuationEl(){const t=document.createElement("span");return t.classList.add("govuk-visually-hidden",this.sectionHeadingDividerClass),t.textContent=", ",t}}w.moduleName="govuk-accordion",w.defaults=Object.freeze({i18n:{hideAllSections:"Hide all sections",hideSection:"Hide",hideSectionAriaLabel:"Hide this section",showAllSections:"Show all sections",showSection:"Show",showSectionAriaLabel:"Show this section"},rememberExpanded:!0}),w.schema=Object.freeze({properties:{i18n:{type:"object"},rememberExpanded:{type:"boolean"}}}),t.Accordion=w})),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.Modules.GovukAccordion=window.GOVUKFrontend.Accordion,function(t){function e(t){this.$module=t,this.sectionClass="govuk-accordion__section",this.sectionExpandedClass="govuk-accordion__section--expanded",this.sectionInnerContentClass="govuk-accordion__section-content",this.sectionHeader=".govuk-accordion__section-header",this.showAllControls=".govuk-accordion__show-all",this.sectionButton=".govuk-accordion__section-button",this.headingText=".govuk-accordion__section-heading-text",this.$module.actions={},this.$module.actions.locale=this.$module.getAttribute("data-locale")}e.prototype.init=function(){if(null!==this.$module.querySelector(this.showAllControls)){this.$module.querySelector(this.showAllControls).classList.add("gem-c-accordion__show-all"),"true"===this.$module.getAttribute("data-anchor-navigation")&&(this.openByAnchorOnLoad(),this.addEventListenersForAnchors());var t=this.$module.getAttribute("data-module");if(!!t&&-1!==t.indexOf("ga4-event-tracker")){var e={event_name:"select_content",type:"accordion",index_section:0,index_section_count:this.$module.querySelectorAll(".govuk-accordion__section").length};this.$module.querySelector(this.showAllControls).setAttribute("data-ga4-event",JSON.stringify(e))}}},e.prototype.openByAnchorOnLoad=function(){if(window.location.hash){var t=window.location.hash.split("#")[1];this.openForAnchor(t)}},e.prototype.addEventListenersForAnchors=function(){var t=this.$module.querySelectorAll(this.sectionInnerContentClass+' a[href*="#"]');for(var e of t)e.pathname===window.location.pathname&&e.addEventListener("click",this.openForAnchor.bind(this,e.hash.split("#")[1]))},e.prototype.openForAnchor=function(t){t=t.replace(":","\\:");var e=this.$module.querySelector("#"+t);if(e){var o=this.getContainingSection(e),i=o.querySelector(this.sectionHeader),s=this.getContainingSection(o),n=i.parentElement;s&&!n.classList.contains(this.sectionExpandedClass)&&i.click()}},e.prototype.getContainingSection=function(t){for(;!t.classList.contains(this.sectionClass);)t=t.parentElement;return t},e.prototype.filterLocale=function(t){return this.$module.actions.locale&&-1!==this.$module.actions.locale.indexOf("{")?JSON.parse(this.$module.actions.locale)[t]:this.$module.actions.locale?this.$module.actions.locale:void 0},t.GemAccordion=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){-1===this.$module.className.indexOf("js-disable-youtube")&&this.embedYoutube(),this.createBarcharts()},e.prototype.embedYoutube=function(){new window.GOVUK.GovspeakYoutubeLinkEnhancement(this.$module).init()},e.prototype.createBarcharts=function(){new window.GOVUK.GovspeakBarchartEnhancement(this.$module).init()},t.Govspeak=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.$module.youtubeLink=this.$module.querySelector(".gem-c-image-card__image-wrapper div")}e.prototype.init=function(){new window.GOVUK.GovspeakYoutubeLinkEnhancement(this.$module.youtubeLink,"gem-c-govspeak__youtube-video gem-c-image-card__youtube-video-embed").init()},t.ImageCard=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.$closeLink=this.$module.querySelector(".js-dismiss-link"),this.$campaignName=this.$module.getAttribute("data-intervention-name"),this.$campaignCookie=window.GOVUK.cookie("intervention_campaign")||""}e.prototype.init=function(){this.$cookieHasCampaign=this.cookieHasCampaign(),this.$closeLink&&(this.$module.close=this.handleClose.bind(this),this.$closeLink.addEventListener("click",this.$module.close)),this.$cookieHasCampaign&&this.hideBanner()},e.prototype.handleClose=function(t){t.preventDefault(),this.$cookieHasCampaign&&this.setCookies(),this.hideBanner()},e.prototype.cookieHasCampaign=function(){return!!this.$campaignCookie&&this.cookieValues().includes(this.$campaignName)},e.prototype.cookieValues=function(){if(null!==this.$campaignCookie&&this.$campaignCookie.length>0)return this.$campaignCookie.split(",")},e.prototype.appendCookieValues=function(){return this.$campaignCookie+","+this.$campaignName},e.prototype.setCookies=function(){this.$campaignCookie?window.GOVUK.setCookie("intervention_campaign",this.appendCookieValues(),{days:30}):window.GOVUK.setCookie("intervention_campaign",this.$campaignName,{days:30})},e.prototype.hideBanner=function(){this.$cookieHasCampaign||this.setCookies(),this.$module.hidden=!0,this.$module.style.display="none"},t.Intervention=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){var t=this.$module.querySelector(".js-see-all-updates-link");if(t){var e=document.querySelector(t.getAttribute("href"));e&&t.addEventListener("click",(function(){var t=e.querySelector("[aria-expanded]");t&&"true"!==t.getAttribute("aria-expanded")&&t.click()}))}},t.Metadata=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.$module.actions={},this.$module.rememberShownStep=!1,this.$module.stepNavSize=!1,this.$module.sessionStoreLink="govuk-step-nav-active-link",this.$module.activeLinkClass="gem-c-step-nav__list-item--active",this.$module.activeStepClass="gem-c-step-nav__step--active",this.$module.activeLinkHref="#content",this.$module.uniqueId=!1}e.prototype.init=function(){this.$module.classList.add("gem-c-step-nav--active"),this.$module.classList.remove("js-hidden"),this.$module.stepNavSize=this.$module.classList.contains("gem-c-step-nav--large")?"Big":"Small",this.$module.rememberShownStep=!!this.$module.hasAttribute("data-remember")&&"Big"===this.$module.stepNavSize,this.$module.steps=this.$module.querySelectorAll(".js-step"),this.$module.stepHeaders=this.$module.querySelectorAll(".js-toggle-panel"),this.$module.totalSteps=this.$module.querySelectorAll(".js-panel").length,this.$module.totalLinks=this.$module.querySelectorAll(".gem-c-step-nav__link").length,this.$module.showOrHideAllButton=!1,this.$module.uniqueId=this.$module.getAttribute("data-id")||!1,this.$module.dataModule=this.$module.getAttribute("data-module"),this.$module.isGa4Enabled=!!this.$module.dataModule&&-1!==this.$module.dataModule.indexOf("ga4-event-tracker"),this.$module.uniqueId&&(this.$module.sessionStoreLink=this.$module.sessionStoreLink+"_"+this.$module.uniqueId),this.getTextForInsertedElements(),this.addButtonstoSteps(),this.addShowHideAllButton(),this.addShowHideToggle(),this.addAriaControlsAttrForShowHideAllButton(),this.ensureOnlyOneActiveLink(),this.showPreviouslyOpenedSteps(),this.bindToggleForSteps(),this.bindToggleShowHideAllButton(),this.bindComponentLinkClicks()},e.prototype.getTextForInsertedElements=function(){this.$module.actions.showText=this.$module.getAttribute("data-show-text"),this.$module.actions.hideText=this.$module.getAttribute("data-hide-text"),this.$module.actions.showAllText=this.$module.getAttribute("data-show-all-text"),this.$module.actions.hideAllText=this.$module.getAttribute("data-hide-all-text")},e.prototype.addShowHideAllButton=function(){var t=document.createElement("div"),e=this.$module.querySelectorAll(".gem-c-step-nav__steps")[0];if(t.className="gem-c-step-nav__controls govuk-!-display-none-print",t.innerHTML='<button aria-expanded="false" class="gem-c-step-nav__button gem-c-step-nav__button--controls js-step-controls-button"><span class="gem-c-step-nav__chevron gem-c-step-nav__chevron--down js-step-controls-button-icon"></span><span class="gem-c-step-nav__button-text gem-c-step-nav__button-text--all js-step-controls-button-text">'+this.$module.actions.showAllText+"</span></button>",this.$module.insertBefore(t,e),this.$module.showOrHideAllButton=this.$module.querySelectorAll(".js-step-controls-button")[0],this.$module.isGa4Enabled){var o={event_name:"select_content",type:"step by step",index_section:0,index_section_count:this.$module.totalSteps};this.$module.showOrHideAllButton.setAttribute("data-ga4-event",JSON.stringify(o))}},e.prototype.addShowHideToggle=function(){for(var t=0;t<this.$module.stepHeaders.length;t++){var e=this.$module.stepHeaders[t];if(!e.querySelectorAll(".js-toggle-link").length){var o=document.createElement("span"),i=document.createElement("span"),s=document.createElement("span"),n=document.createElement("span"),a=document.createElement("span");o.className="gem-c-step-nav__toggle-link js-toggle-link govuk-!-display-none-print",i.className="gem-c-step-nav__button-text js-toggle-link-text",s.className="gem-c-step-nav__chevron js-toggle-link-icon",n.className="gem-c-step-nav__toggle-link-focus",a.className="govuk-visually-hidden",o.appendChild(n),n.appendChild(s),n.appendChild(i),a.innerHTML=" this section",o.appendChild(a),e.querySelectorAll(".js-step-title-button")[0].appendChild(o)}}},e.prototype.headerIsOpen=function(t){return void 0!==t.parentNode.getAttribute("show")},e.prototype.addAriaControlsAttrForShowHideAllButton=function(){var t=this.$module.querySelectorAll(".js-panel")[0].getAttribute("id");this.$module.showOrHideAllButton.setAttribute("aria-controls",t)},e.prototype.setAllStepsShownState=function(t){for(var e=[],o=0;o<this.$module.steps.length;o++){new this.StepView(this.$module.steps[o],this.$module).setIsShown(t),t&&e.push(this.$module.steps[o].getAttribute("id"))}t?this.saveToSessionStorage(this.$module.uniqueId,JSON.stringify(e)):this.removeFromSessionStorage(this.$module.uniqueId)},e.prototype.showPreviouslyOpenedSteps=function(){for(var t=this.loadFromSessionStorage(this.$module.uniqueId)||[],e=0;e<this.$module.steps.length;e++){var o=this.$module.steps[e],i=o.getAttribute("id"),s=new this.StepView(o,this.$module),n=o.hasAttribute("data-show");this.$module.rememberShownStep&&t.indexOf(i)>-1||n&&"undefined"!==n?s.setIsShown(!0):s.setIsShown(!1)}t.length>0&&(this.$module.showOrHideAllButton.setAttribute("aria-expanded",!0),this.setShowHideAllText())},e.prototype.addButtonstoSteps=function(){for(var t=0;t<this.$module.steps.length;t++){var e=this.$module.steps[t],o=e.querySelectorAll(".js-step-title")[0],i=e.querySelectorAll(".js-panel")[0].getAttribute("id"),s=o.textContent||o.innerText;if(o.outerHTML='<span class="js-step-title"><button class="gem-c-step-nav__button gem-c-step-nav__button--title js-step-title-button" aria-expanded="false" aria-controls="'+i+'"><span class="gem-c-step-nav____title-text-focus"><span class="gem-c-step-nav__title-text js-step-title-text">'+s+'</span><span class="govuk-visually-hidden gem-c-step-nav__section-heading-divider">, </span></span></button></span>',this.$module.isGa4Enabled){var n={event_name:"select_content",type:"step by step",text:s.trim(),index_section:t+1,index_section_count:this.$module.totalSteps,index_total:e.querySelectorAll("a").length};e.querySelector(".js-step-title-button").setAttribute("data-ga4-event",JSON.stringify(n))}}},e.prototype.bindToggleForSteps=function(){for(var t=this,e=this.$module.querySelectorAll(".js-toggle-panel"),o=0;o<e.length;o++)e[o].addEventListener("click",(function(){new t.StepView(this.parentNode,t.$module).toggle(),t.setShowHideAllText(),t.rememberStepState(this.parentNode)}))},e.prototype.rememberStepState=function(t){if(this.$module.rememberShownStep){var e=JSON.parse(this.loadFromSessionStorage(this.$module.uniqueId))||[],o=t.getAttribute("id");if(t.classList.contains("step-is-shown"))e.push(o);else{var i=e.indexOf(o);i>-1&&e.splice(i,1)}this.saveToSessionStorage(this.$module.uniqueId,JSON.stringify(e))}},e.prototype.bindComponentLinkClicks=function(){for(var t=this.$module.querySelectorAll(".js-link"),e=this,o=0;o<t.length;o++)t[o].addEventListener("click",(function(){var t=this.getAttribute("data-position");"external"!==this.getAttribute("rel")&&e.saveToSessionStorage(e.$module.sessionStoreLink,t),this.getAttribute("href")===e.$module.activeLinkHref&&(e.setOnlyThisLinkActive(this),e.setActiveStepClass())}))},e.prototype.saveToSessionStorage=function(t,e){window.sessionStorage.setItem(t,e)},e.prototype.loadFromSessionStorage=function(t){return window.sessionStorage.getItem(t)},e.prototype.removeFromSessionStorage=function(t){window.sessionStorage.removeItem(t)},e.prototype.setOnlyThisLinkActive=function(t){for(var e=this.$module.querySelectorAll("."+this.$module.activeLinkClass),o=0;o<e.length;o++)e[o].classList.remove(this.$module.activeLinkClass);t.parentNode.classList.add(this.$module.activeLinkClass)},e.prototype.ensureOnlyOneActiveLink=function(){var t=this.$module.querySelectorAll(".js-list-item."+this.$module.activeLinkClass);if(!(t.length<=1)){var e=this.loadFromSessionStorage(this.$module.sessionStoreLink),o=this.$module.querySelectorAll("."+this.$module.activeLinkClass)[0].firstChild.getAttribute("data-position"),i=e||o,s=this.$module.querySelectorAll('[data-position="'+i+'"]')[0];s?s.parentNode.classList.contains(this.$module.activeLinkClass)||(i=s):i=o,this.removeActiveStateFromAllButCurrent(t,i),this.setActiveStepClass()}},e.prototype.removeActiveStateFromAllButCurrent=function(t,e){for(var o=0;o<t.length;o++){var i=t[o];if(i.querySelectorAll(".js-link")[0].getAttribute("data-position").toString()!==e.toString()){i.classList.remove(this.$module.activeLinkClass);var s=i.querySelectorAll(".visuallyhidden");s.length&&s[0].parentNode.removeChild(s[0])}}},e.prototype.setActiveStepClass=function(){for(var t=this.$module.querySelectorAll("."+this.$module.activeStepClass),e=0;e<t.length;e++)t[e].classList.remove(this.$module.activeStepClass),t[e].removeAttribute("data-show");var o=this.$module.querySelectorAll("."+this.$module.activeLinkClass)[0];if(o){var i=o.closest(".gem-c-step-nav__step");i.classList.add(this.$module.activeStepClass),i.setAttribute("data-show","")}},e.prototype.bindToggleShowHideAllButton=function(){var t=this;this.$module.showOrHideAllButton.addEventListener("click",(function(){var e=(this.textContent||this.innerText)===t.$module.actions.showAllText;return t.setAllStepsShownState(e),t.$module.showOrHideAllButton.setAttribute("aria-expanded",e),t.setShowHideAllText(),!1}))},e.prototype.setShowHideAllText=function(){var t=this.$module.querySelectorAll(".step-is-shown").length,e=this.$module.showOrHideAllButton.querySelector(".js-step-controls-button-icon"),o=this.$module.showOrHideAllButton.querySelector(".js-step-controls-button-text");t===this.$module.totalSteps?(o.innerHTML=this.$module.actions.hideAllText,e.classList.remove("gem-c-step-nav__chevron--down")):(o.innerHTML=this.$module.actions.showAllText,e.classList.add("gem-c-step-nav__chevron--down"))},e.prototype.StepView=function(t,e){this.stepElement=t,this.stepContent=this.stepElement.querySelectorAll(".js-panel")[0],this.titleButton=this.stepElement.querySelectorAll(".js-step-title-button")[0];var o=this.stepElement.querySelectorAll(".js-step-title-text")[0];this.title=o.textContent||o.innerText,this.title=this.title.replace(/^\s+|\s+$/g,""),this.showText=e.actions.showText,this.hideText=e.actions.hideText,this.upChevronSvg=e.upChevronSvg,this.downChevronSvg=e.downChevronSvg,this.show=function(){this.setIsShown(!0)},this.hide=function(){this.setIsShown(!1)},this.toggle=function(){this.setIsShown(this.isHidden())},this.setIsShown=function(t){var e=this.stepElement.querySelectorAll(".js-toggle-link")[0],o=e.querySelector(".js-toggle-link-text"),i=e.querySelector(".js-toggle-link-icon");t?(this.stepElement.classList.add("step-is-shown"),this.stepContent.classList.remove("js-hidden"),o.innerHTML=this.hideText,i.classList.remove("gem-c-step-nav__chevron--down")):(this.stepElement.classList.remove("step-is-shown"),this.stepContent.classList.add("js-hidden"),o.innerHTML=this.showText,i.classList.add("gem-c-step-nav__chevron--down")),this.titleButton.setAttribute("aria-expanded",t)},this.isShown=function(){return this.stepElement.classList.contains("step-is-shown")},this.isHidden=function(){return!this.isShown()},this.numberOfContentItems=function(){return this.stepContent.querySelectorAll(".js-link").length}},e.prototype.StepToggleClick=function(t,e,o,i){this.target=t.target,this.stepIsOptional=o,this.stepNavSize=i,this.stepIndex=function(){return this.$module.steps.index(e.element)+1},this.locateClickElement=function(){return this.clickedOnIcon()?this.iconType()+" click":this.clickedOnHeading()?"Heading click":"Elsewhere click"},this.clickedOnIcon=function(){return this.target.classList.contains("js-toggle-link")},this.clickedOnHeading=function(){return this.target.classList.contains("js-step-title-text")},this.iconType=function(){return e.isHidden()?"Minus":"Plus"},this.isOptional=function(){return this.stepIsOptional?" ; optional":""}},t.Gemstepnav=e}(window.GOVUK.Modules),void 0===window.GOVUK&&(window.GOVUK={}),void 0===window.GOVUK.support&&(window.GOVUK.support={}),window.GOVUK.support.history=function(){return window.history&&window.history.pushState&&window.history.replaceState},window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.filterTimeout=null,this.form=this.$module.querySelector('[data-filter="form"]'),this.searchResults=this.$module.querySelector("#search_results")}e.prototype.init=function(){this.$module.filterList=this.filterList.bind(this),this.form.classList.add("filter-list__form--active"),this.results=document.createElement("div"),this.results.classList.add("filter-list__results","govuk-heading-m","js-search-results"),this.results.setAttribute("aria-live","polite"),this.results.innerHTML=this.countInitialItems()+" results found",this.searchResults.insertBefore(this.results,this.searchResults.firstChild),this.form.onsubmit=function(){return!1},this.form.addEventListener("keyup",function(t){var e=t.target.value;clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(){this.$module.filterList(e)}.bind(this),200)}.bind(this))},e.prototype.filterList=function(t){for(var e=this.$module.querySelectorAll('[data-filter="item"]'),o=this.$module.querySelectorAll('[data-filter="block"]'),i=0;i<=e.length-1;i++){var s=e[i];this.matchSearchTerm(s,t)||s.classList.add("js-hidden")}this.updateItemCount(o)},e.prototype.matchSearchTerm=function(t,e){var o=function(t){return t.trim().replace(/\r?\n|\r/g," ").replace(/\s+/g," ")}(t.getAttribute("data-filter-terms")||"");return t.classList.remove("js-hidden"),null!==new RegExp(e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i").exec(o)},e.prototype.countInitialItems=function(){return this.$module.querySelectorAll('[data-filter="item"]').length},e.prototype.updateItemCount=function(t){for(var e=0,o=0;o<t.length;o++){var i=t[o].closest('[data-filter="block"]');i.classList.remove("js-hidden");for(var s=i.querySelectorAll('[data-filter="item"]'),n=0,a=i.querySelectorAll('[data-filter="inner-block"]'),r=0;r<a.length;r++)a[r].classList.add("js-hidden");for(var l=0;l<s.length;l++)s[l].classList.contains("js-hidden")||(n++,null!==s[l].closest('[data-filter="inner-block"]')&&s[l].closest('[data-filter="inner-block"]').classList.remove("js-hidden"));var c=i.querySelectorAll('[data-item-count="true"]'),d=i.querySelectorAll(".js-accessible-item-count");if(0===n&&i.classList.toggle("js-hidden"),n>0){for(var u=0;u<c.length;u++)c[u].textContent=n;for(var h=0;h<d.length;h++)d[h].textContent=n}e+=n}var p=" results found";1===e&&(p=" result found"),this.results.innerHTML=e+p},t.ListFilter=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.addEventListener("click",function(t){var e,o=t.target;do{if(e=o.getAttribute("data-toggle-attribute"))break;o=o.parentNode}while(o&&o!==this.$module);if(e){var i=o.getAttribute(e),s=o.getAttribute("data-when-closed-text"),n=o.getAttribute("data-when-open-text");o.setAttribute(e,i===s?n:s)}}.bind(this))},t.ToggleAttribute=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.module=t}e.prototype.init=function(){this.checkOnLandingPage()&&this.globarBarSeen()},e.prototype.checkOnLandingPage=function(){return"/coronavirus"===window.location.pathname},e.prototype.globarBarSeen=function(){if(window.GOVUK.cookie("global_bar_seen")){var t=JSON.parse(window.GOVUK.cookie("global_bar_seen")).version;window.GOVUK.setCookie("global_bar_seen",JSON.stringify({count:999,version:t}),{days:84})}},t.CoronavirusLandingPage=e}(window.GOVUK.Modules);